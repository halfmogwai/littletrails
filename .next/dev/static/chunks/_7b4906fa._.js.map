{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/DaycareEnvironment.tsx"],"sourcesContent":["\"use client\"\n\nimport { RigidBody } from \"@react-three/rapier\"\nimport { useMemo } from \"react\"\n\nexport function DaycareEnvironment() {\n  // Create decorative elements with memoization for performance\n  const decorativeElements = useMemo(() => {\n    const elements = []\n    \n    // Add decorative wall art and posters\n    for (let i = 0; i < 8; i++) {\n      const angle = (i / 8) * Math.PI * 2\n      const radius = 35\n      const x = Math.cos(angle) * radius\n      const z = Math.sin(angle) * radius\n      \n      elements.push(\n        <RigidBody key={`wall-art-${i}`} type=\"fixed\" colliders=\"cuboid\">\n          <mesh position={[x, 3, z]} rotation={[0, angle + Math.PI, 0]}>\n            <planeGeometry args={[2, 1.5]} />\n            <meshStandardMaterial color={i % 2 === 0 ? \"#FFE5EC\" : \"#D4F1F4\"} roughness={0.5} />\n          </mesh>\n        </RigidBody>\n      )\n    }\n    \n    return elements\n  }, [])\n\n  return (\n    <>\n      {/* Ground/Floor with improved texture */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" friction={1}>\n        <mesh receiveShadow position={[0, -0.5, 0]} rotation={[-Math.PI / 2, 0, 0]}>\n          <planeGeometry args={[80, 80]} />\n          <meshStandardMaterial color=\"#FFF5F7\" roughness={0.8} metalness={0.1} />\n        </mesh>\n      </RigidBody>\n\n      {/* Outer walls with windows */}\n      <WallSegment position={[0, 2, -40]} rotation={[0, 0, 0]} width={80} height={4} color=\"#E0BBE4\" hasWindows={true} />\n      <WallSegment position={[0, 2, 40]} rotation={[0, Math.PI, 0]} width={80} height={4} color=\"#E0BBE4\" hasWindows={true} />\n      <WallSegment position={[-40, 2, 0]} rotation={[0, Math.PI / 2, 0]} width={80} height={4} color=\"#FFDFD3\" hasWindows={true} />\n      <WallSegment position={[40, 2, 0]} rotation={[0, -Math.PI / 2, 0]} width={80} height={4} color=\"#FFDFD3\" hasWindows={true} />\n\n      {/* Interior walls creating rooms */}\n      <WallSegment position={[-10, 2, 15]} rotation={[0, 0, 0]} width={20} height={4} color=\"#D4F1F4\" />\n      <WallSegment position={[10, 2, -15]} rotation={[0, Math.PI / 2, 0]} width={15} height={4} color=\"#FFEAA7\" />\n\n      {/* Ceiling (optional - creates more enclosed feel) */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\">\n        <mesh position={[0, 6, 0]} rotation={[Math.PI / 2, 0, 0]}>\n          <planeGeometry args={[80, 80]} />\n          <meshStandardMaterial color=\"#FFFAF0\" side={2} transparent opacity={0.9} />\n        </mesh>\n      </RigidBody>\n\n      {/* Floor decorations - pastel rugs */}\n      <mesh position={[0, 0.01, 0]} rotation={[-Math.PI / 2, 0, 0]}>\n        <circleGeometry args={[8, 32]} />\n        <meshStandardMaterial color=\"#FFE5EC\" roughness={0.9} />\n      </mesh>\n\n      <mesh position={[-15, 0.01, -15]} rotation={[-Math.PI / 2, 0, 0]}>\n        <circleGeometry args={[5, 32]} />\n        <meshStandardMaterial color=\"#E0BBE4\" roughness={0.9} />\n      </mesh>\n\n      <mesh position={[15, 0.01, 15]} rotation={[-Math.PI / 2, 0, 0]}>\n        <circleGeometry args={[5, 32]} />\n        <meshStandardMaterial color=\"#D4F1F4\" roughness={0.9} />\n      </mesh>\n    </>\n  )\n}\n\ninterface WallSegmentProps {\n  position: [number, number, number]\n  rotation: [number, number, number]\n  width: number\n  height: number\n  color: string\n  hasWindows?: boolean\n}\n\nfunction WallSegment({ position, rotation, width, height, color, hasWindows = false }: WallSegmentProps) {\n  return (\n    <RigidBody type=\"fixed\" colliders=\"cuboid\">\n      <group position={position} rotation={rotation}>\n        {/* Main wall - made thinner to reduce camera interference */}\n        <mesh castShadow receiveShadow>\n          <boxGeometry args={[width, height, 0.2]} />\n          <meshStandardMaterial color={color} roughness={0.7} metalness={0.2} />\n        </mesh>\n        \n        {/* Add windows if enabled */}\n        {hasWindows && (\n          <>\n            {/* Window frames */}\n            <mesh position={[0, 0, 0.11]}>\n              <planeGeometry args={[width * 0.8, height * 0.6]} />\n              <meshStandardMaterial color=\"#D4F1F4\" transparent opacity={0.7} />\n            </mesh>\n            \n            {/* Window decorations */}\n            <mesh position={[-width * 0.35, height * 0.2, 0.12]}>\n              <boxGeometry args={[0.5, 0.1, 0.03]} />\n              <meshStandardMaterial color=\"#FFE5EC\" />\n            </mesh>\n            <mesh position={[width * 0.35, height * 0.2, 0.12]}>\n              <boxGeometry args={[0.5, 0.1, 0.03]} />\n              <meshStandardMaterial color=\"#FFE5EC\" />\n            </mesh>\n          </>\n        )}\n      </group>\n    </RigidBody>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/stores/gameStore.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport { subscribeWithSelector } from \"zustand/middleware\"\nimport type {\n  Player,\n  Caregiver,\n  Lobby,\n  InteractiveObject,\n  Accident,\n  ChatMessage,\n  Vector3,\n  ClothingState,\n  NeedGauges,\n} from \"@/lib/types/gameTypes\"\n\ninterface GameState {\n  // Lobby state\n  currentLobby: Lobby | null\n  currentPlayerId: string | null\n\n  // Players and NPCs\n  players: Map<string, Player>\n  caregivers: Map<string, Caregiver>\n\n  // Environment\n  objects: Map<string, InteractiveObject>\n  accidents: Map<string, Accident>\n\n  // Chat\n  messages: ChatMessage[]\n\n  // UI state\n  isVoiceActive: boolean\n  selectedPlayerId: string | null\n  showPaywall: boolean\n\n  // Actions\n  setCurrentLobby: (lobby: Lobby) => void\n  setCurrentPlayer: (playerId: string) => void\n  updatePlayer: (playerId: string, updates: Partial<Player>) => void\n  updateCaregiver: (caregiverId: string, updates: Partial<Caregiver>) => void\n  addMessage: (message: ChatMessage) => void\n  addAccident: (accident: Accident) => void\n  cleanAccident: (accidentId: string) => void\n  updateObject: (objectId: string, updates: Partial<InteractiveObject>) => void\n  setVoiceActive: (active: boolean) => void\n  setSelectedPlayer: (playerId: string | null) => void\n  setShowPaywall: (show: boolean) => void\n  updatePlayerPosition: (playerId: string, position: Vector3, rotation: number) => void\n  updatePlayerClothing: (playerId: string, clothing: Partial<ClothingState>) => void\n  updatePlayerNeeds: (playerId: string, needs: Partial<NeedGauges>) => void\n  addCaregiver: (caregiver: Caregiver) => void\n}\n\nexport const useGameStore = create<GameState>()(\n  subscribeWithSelector((set, get) => ({\n    currentLobby: null,\n    currentPlayerId: null,\n    players: new Map(),\n    caregivers: new Map(),\n    objects: new Map(),\n    accidents: new Map(),\n    messages: [],\n    isVoiceActive: false,\n    selectedPlayerId: null,\n    showPaywall: false,\n\n    setCurrentLobby: (lobby) =>\n      set({\n        currentLobby: lobby,\n        players: new Map(lobby.players),\n        caregivers: new Map(lobby.caregivers),\n        objects: new Map(lobby.objects),\n        accidents: new Map(lobby.accidents),\n      }),\n\n    setCurrentPlayer: (playerId) => set({ currentPlayerId: playerId }),\n\n    updatePlayer: (playerId, updates) =>\n      set((state) => {\n        const players = new Map(state.players)\n        const player = players.get(playerId)\n        if (player) {\n          players.set(playerId, { ...player, ...updates })\n        }\n        return player ? { players } : state\n      }),\n\n    updateCaregiver: (caregiverId, updates) =>\n      set((state) => {\n        const caregivers = new Map(state.caregivers)\n        const caregiver = caregivers.get(caregiverId)\n        if (caregiver) {\n          caregivers.set(caregiverId, { ...caregiver, ...updates })\n        }\n        return caregiver ? { caregivers } : state\n      }),\n\n    addMessage: (message) =>\n      set((state) => ({\n        messages: [...state.messages, message].slice(-100), // Keep last 100 messages\n      })),\n\n    addAccident: (accident) =>\n      set((state) => {\n        const accidents = new Map(state.accidents)\n        accidents.set(accident.id, accident)\n        return { accidents }\n      }),\n\n    cleanAccident: (accidentId) =>\n      set((state) => {\n        const accidents = new Map(state.accidents)\n        const accident = accidents.get(accidentId)\n        if (accident) {\n          accidents.set(accidentId, { ...accident, cleanedUp: true })\n        }\n        return { accidents }\n      }),\n\n    updateObject: (objectId, updates) =>\n      set((state) => {\n        const objects = new Map(state.objects)\n        const obj = objects.get(objectId)\n        if (obj) {\n          objects.set(objectId, { ...obj, ...updates })\n        }\n        return { objects }\n      }),\n\n    setVoiceActive: (active) => set({ isVoiceActive: active }),\n\n    setSelectedPlayer: (playerId) => set({ selectedPlayerId: playerId }),\n\n    setShowPaywall: (show) => set({ showPaywall: show }),\n\n    updatePlayerPosition: (playerId, position, rotation) =>\n      set((state) => {\n        const players = new Map(state.players)\n        const player = players.get(playerId)\n        if (player) {\n          if (\n            player.position.x === position.x &&\n            player.position.y === position.y &&\n            player.position.z === position.z &&\n            player.rotation === rotation\n          ) {\n            return state\n          }\n          players.set(playerId, { ...player, position, rotation })\n        }\n        return player ? { players } : state\n      }),\n\n    updatePlayerClothing: (playerId, clothing) =>\n      set((state) => {\n        const players = new Map(state.players)\n        const player = players.get(playerId)\n        if (player) {\n          players.set(playerId, {\n            ...player,\n            clothing: { ...player.clothing, ...clothing },\n          })\n        }\n        return player ? { players } : state\n      }),\n\n    updatePlayerNeeds: (playerId, needs) =>\n      set((state) => {\n        const players = new Map(state.players)\n        const player = players.get(playerId)\n        if (player) {\n          players.set(playerId, {\n            ...player,\n            needs: { ...player.needs, ...needs },\n          })\n        }\n        return player ? { players } : state\n      }),\n\n    addCaregiver: (caregiver) =>\n      set((state) => {\n        const caregivers = new Map(state.caregivers)\n        caregivers.set(caregiver.id, caregiver)\n        return { caregivers }\n      }),\n  })),\n)\n\nexport const selectPlayerById = (state: GameState, playerId: string) => state.players.get(playerId)\n\nexport const selectAllPlayers = (state: GameState) => state.players\n\nexport const selectCaregiverById = (state: GameState, caregiverId: string) => state.caregivers.get(caregiverId)\n\nexport const selectAllCaregivers = (state: GameState) => state.caregivers\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 740, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/DaycareObjects.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { RigidBody } from \"@react-three/rapier\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport type { InteractiveObject } from \"@/lib/types/gameTypes\"\n\nexport function DaycareObjects() {\n  const objectsMap = useGameStore((state) => state.objects)\n  const objects = useMemo(() => Array.from(objectsMap.values()), [objectsMap])\n\n  return (\n    <>\n      {objects.map((obj) => (\n        <InteractiveObjectMesh key={obj.id} object={obj} />\n      ))}\n\n      {/* Default objects if none loaded */}\n      {objects.length === 0 && <DefaultDaycareObjects />}\n    </>\n  )\n}\n\nfunction InteractiveObjectMesh({ object }: { object: InteractiveObject }) {\n  const updateObject = useGameStore((state) => state.updateObject)\n\n  const handleClick = () => {\n    console.log(\"[v0] Object clicked:\", object.id, object.type)\n    // Handle object interaction\n  }\n\n  return (\n    <RigidBody\n      type=\"fixed\"\n      colliders=\"cuboid\"\n      position={[object.position.x, object.position.y, object.position.z]}\n      rotation={[0, object.rotation, 0]}\n    >\n      <ObjectByType type={object.type} isOccupied={object.isOccupied} onClick={handleClick} />\n    </RigidBody>\n  )\n}\n\nfunction ObjectByType({\n  type,\n  isOccupied,\n  onClick,\n}: {\n  type: InteractiveObject[\"type\"]\n  isOccupied: boolean\n  onClick: () => void\n}) {\n  const occupiedColor = isOccupied ? \"#FFA5A5\" : \"#B5EAD7\"\n\n  switch (type) {\n    case \"changing_station\":\n      return <ChangingStation color={occupiedColor} onClick={onClick} />\n\n    case \"timeout_chair\":\n      return <TimeoutChair color={occupiedColor} onClick={onClick} />\n\n    case \"timeout_stool\":\n      return <TimeoutStool color={occupiedColor} onClick={onClick} />\n\n    case \"slide\":\n      return <Slide color={occupiedColor} onClick={onClick} />\n\n    case \"play_area\":\n      return <PlayArea color={occupiedColor} onClick={onClick} />\n\n    case \"potty\":\n      return <Potty color={occupiedColor} onClick={onClick} />\n\n    case \"toilet_female\":\n    case \"toilet_male\":\n      return <Toilet color={occupiedColor} onClick={onClick} />\n\n    case \"toy_box\":\n      return <ToyBox color={occupiedColor} onClick={onClick} />\n\n    case \"music_system\":\n      return <MusicSystem color={occupiedColor} onClick={onClick} />\n\n    default:\n      return <DefaultObject color={occupiedColor} onClick={onClick} />\n  }\n}\n\nfunction ChangingStation({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Table/platform */}\n      <mesh position={[0, 0.75, 0]} castShadow receiveShadow>\n        <boxGeometry args={[2, 0.2, 1.5]} />\n        <meshStandardMaterial color={color} roughness={0.6} />\n      </mesh>\n      {/* Legs */}\n      <mesh position={[-0.8, 0.35, -0.6]} castShadow>\n        <cylinderGeometry args={[0.05, 0.05, 0.7]} />\n        <meshStandardMaterial color=\"#C7CEEA\" />\n      </mesh>\n      <mesh position={[0.8, 0.35, -0.6]} castShadow>\n        <cylinderGeometry args={[0.05, 0.05, 0.7]} />\n        <meshStandardMaterial color=\"#C7CEEA\" />\n      </mesh>\n      <mesh position={[-0.8, 0.35, 0.6]} castShadow>\n        <cylinderGeometry args={[0.05, 0.05, 0.7]} />\n        <meshStandardMaterial color=\"#C7CEEA\" />\n      </mesh>\n      <mesh position={[0.8, 0.35, 0.6]} castShadow>\n        <cylinderGeometry args={[0.05, 0.05, 0.7]} />\n        <meshStandardMaterial color=\"#C7CEEA\" />\n      </mesh>\n      {/* Cushion/pad */}\n      <mesh position={[0, 0.95, 0]}>\n        <boxGeometry args={[1.8, 0.3, 1.3]} />\n        <meshStandardMaterial color=\"#FFE5EC\" roughness={0.9} />\n      </mesh>\n    </group>\n  )\n}\n\nfunction TimeoutChair({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Seat */}\n      <mesh position={[0, 0.4, 0]} castShadow receiveShadow>\n        <boxGeometry args={[0.6, 0.1, 0.6]} />\n        <meshStandardMaterial color={color} roughness={0.6} />\n      </mesh>\n      {/* Back */}\n      <mesh position={[0, 0.8, -0.25]} castShadow>\n        <boxGeometry args={[0.6, 0.7, 0.1]} />\n        <meshStandardMaterial color={color} roughness={0.6} />\n      </mesh>\n      {/* Legs */}\n      {[\n        [-0.25, 0.2, -0.25],\n        [0.25, 0.2, -0.25],\n        [-0.25, 0.2, 0.25],\n        [0.25, 0.2, 0.25],\n      ].map((pos, i) => (\n        <mesh key={i} position={pos as [number, number, number]} castShadow>\n          <cylinderGeometry args={[0.03, 0.03, 0.4]} />\n          <meshStandardMaterial color=\"#E0BBE4\" />\n        </mesh>\n      ))}\n    </group>\n  )\n}\n\nfunction TimeoutStool({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Seat */}\n      <mesh position={[0, 0.3, 0]} castShadow receiveShadow>\n        <cylinderGeometry args={[0.3, 0.3, 0.1]} />\n        <meshStandardMaterial color={color} roughness={0.6} />\n      </mesh>\n      {/* Legs */}\n      {[\n        [-0.2, 0.125, -0.2],\n        [0.2, 0.125, -0.2],\n        [-0.2, 0.125, 0.2],\n        [0.2, 0.125, 0.2],\n      ].map((pos, i) => (\n        <mesh key={i} position={pos as [number, number, number]} castShadow>\n          <cylinderGeometry args={[0.025, 0.025, 0.25]} />\n          <meshStandardMaterial color=\"#FFDFD3\" />\n        </mesh>\n      ))}\n    </group>\n  )\n}\n\nfunction Slide({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Slide surface */}\n      <mesh position={[0, 1, 0]} rotation={[-Math.PI / 6, 0, 0]} castShadow receiveShadow>\n        <boxGeometry args={[1.2, 0.1, 3]} />\n        <meshStandardMaterial color={color} roughness={0.3} metalness={0.4} />\n      </mesh>\n      {/* Side rails */}\n      <mesh position={[-0.55, 1.2, 0]} rotation={[-Math.PI / 6, 0, 0]} castShadow>\n        <boxGeometry args={[0.1, 0.3, 3]} />\n        <meshStandardMaterial color=\"#D4F1F4\" />\n      </mesh>\n      <mesh position={[0.55, 1.2, 0]} rotation={[-Math.PI / 6, 0, 0]} castShadow>\n        <boxGeometry args={[0.1, 0.3, 3]} />\n        <meshStandardMaterial color=\"#D4F1F4\" />\n      </mesh>\n      {/* Platform */}\n      <mesh position={[0, 2, -1.2]} castShadow>\n        <boxGeometry args={[1.2, 0.2, 0.8]} />\n        <meshStandardMaterial color=\"#FFEAA7\" />\n      </mesh>\n      {/* Support structure */}\n      <mesh position={[0, 1, -1.2]} castShadow>\n        <cylinderGeometry args={[0.1, 0.1, 2]} />\n        <meshStandardMaterial color=\"#E0BBE4\" />\n      </mesh>\n    </group>\n  )\n}\n\nfunction PlayArea({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Play mat */}\n      <mesh position={[0, 0.05, 0]} rotation={[-Math.PI / 2, 0, 0]}>\n        <circleGeometry args={[2, 32]} />\n        <meshStandardMaterial color={color} roughness={0.9} />\n      </mesh>\n      {/* Toys scattered around */}\n      <mesh position={[-0.5, 0.2, 0.5]} castShadow>\n        <boxGeometry args={[0.3, 0.3, 0.3]} />\n        <meshStandardMaterial color=\"#FFE5EC\" />\n      </mesh>\n      <mesh position={[0.6, 0.15, -0.4]} castShadow>\n        <sphereGeometry args={[0.15]} />\n        <meshStandardMaterial color=\"#D4F1F4\" />\n      </mesh>\n      <mesh position={[0, 0.25, 0]} castShadow>\n        <cylinderGeometry args={[0.2, 0.2, 0.5]} />\n        <meshStandardMaterial color=\"#FFDFD3\" />\n      </mesh>\n    </group>\n  )\n}\n\nfunction Potty({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Base */}\n      <mesh position={[0, 0.15, 0]} castShadow receiveShadow>\n        <cylinderGeometry args={[0.25, 0.3, 0.3]} />\n        <meshStandardMaterial color={color} roughness={0.4} />\n      </mesh>\n      {/* Bowl */}\n      <mesh position={[0, 0.35, 0]} castShadow>\n        <cylinderGeometry args={[0.22, 0.18, 0.15]} />\n        <meshStandardMaterial color=\"#FFFFFF\" roughness={0.2} metalness={0.3} />\n      </mesh>\n      {/* Back support */}\n      <mesh position={[0, 0.5, -0.2]} castShadow>\n        <boxGeometry args={[0.4, 0.3, 0.1]} />\n        <meshStandardMaterial color={color} roughness={0.6} />\n      </mesh>\n    </group>\n  )\n}\n\nfunction Toilet({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Base */}\n      <mesh position={[0, 0.2, 0]} castShadow receiveShadow>\n        <boxGeometry args={[0.5, 0.4, 0.6]} />\n        <meshStandardMaterial color=\"#FFFFFF\" roughness={0.2} metalness={0.3} />\n      </mesh>\n      {/* Bowl */}\n      <mesh position={[0, 0.45, 0]} castShadow>\n        <cylinderGeometry args={[0.2, 0.2, 0.1]} />\n        <meshStandardMaterial color=\"#FFFFFF\" roughness={0.2} metalness={0.3} />\n      </mesh>\n      {/* Tank */}\n      <mesh position={[0, 0.7, -0.2]} castShadow>\n        <boxGeometry args={[0.45, 0.5, 0.2]} />\n        <meshStandardMaterial color=\"#FFFFFF\" roughness={0.2} metalness={0.3} />\n      </mesh>\n      {/* Seat */}\n      <mesh position={[0, 0.5, 0]} rotation={[-Math.PI / 2, 0, 0]}>\n        <ringGeometry args={[0.15, 0.25, 32]} />\n        <meshStandardMaterial color={color} roughness={0.4} side={2} />\n      </mesh>\n    </group>\n  )\n}\n\nfunction ToyBox({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Box body */}\n      <mesh position={[0, 0.4, 0]} castShadow receiveShadow>\n        <boxGeometry args={[1.2, 0.8, 0.8]} />\n        <meshStandardMaterial color={color} roughness={0.7} />\n      </mesh>\n      {/* Lid */}\n      <mesh position={[0, 0.85, 0]} castShadow>\n        <boxGeometry args={[1.25, 0.1, 0.85]} />\n        <meshStandardMaterial color=\"#E0BBE4\" roughness={0.7} />\n      </mesh>\n      {/* Toys peeking out */}\n      <mesh position={[-0.3, 0.9, 0]} castShadow>\n        <sphereGeometry args={[0.1]} />\n        <meshStandardMaterial color=\"#FFE5EC\" />\n      </mesh>\n      <mesh position={[0.2, 0.95, 0.1]} castShadow>\n        <boxGeometry args={[0.15, 0.15, 0.15]} />\n        <meshStandardMaterial color=\"#D4F1F4\" />\n      </mesh>\n    </group>\n  )\n}\n\nfunction MusicSystem({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <group onClick={onClick}>\n      {/* Base unit */}\n      <mesh position={[0, 0.5, 0]} castShadow receiveShadow>\n        <boxGeometry args={[0.8, 0.6, 0.4]} />\n        <meshStandardMaterial color={color} roughness={0.5} metalness={0.5} />\n      </mesh>\n      {/* Display/screen */}\n      <mesh position={[0, 0.55, 0.21]}>\n        <planeGeometry args={[0.6, 0.3]} />\n        <meshStandardMaterial color=\"#87CEEB\" emissive=\"#87CEEB\" emissiveIntensity={0.5} />\n      </mesh>\n      {/* Buttons */}\n      {[-0.2, 0, 0.2].map((x, i) => (\n        <mesh key={i} position={[x, 0.25, 0.21]} castShadow>\n          <cylinderGeometry args={[0.05, 0.05, 0.05]} />\n          <meshStandardMaterial color=\"#FFE5EC\" />\n        </mesh>\n      ))}\n    </group>\n  )\n}\n\nfunction DefaultObject({ color, onClick }: { color: string; onClick: () => void }) {\n  return (\n    <mesh onClick={onClick} castShadow receiveShadow>\n      <boxGeometry args={[1, 1, 1]} />\n      <meshStandardMaterial color={color} roughness={0.6} />\n    </mesh>\n  )\n}\n\nfunction DefaultDaycareObjects() {\n  return (\n    <>\n      {/* Changing station */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[-15, 0, 10]}>\n        <ChangingStation color=\"#B5EAD7\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Timeout chairs */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[15, 0, -15]}>\n        <TimeoutChair color=\"#B5EAD7\" onClick={() => {}} />\n      </RigidBody>\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[17, 0, -15]}>\n        <TimeoutChair color=\"#B5EAD7\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Slide */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[-20, 0, -10]}>\n        <Slide color=\"#FFB7B2\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Play areas */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[0, 0, 0]}>\n        <PlayArea color=\"#D4F1F4\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Potties */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[-5, 0, 15]}>\n        <Potty color=\"#FFEAA7\" onClick={() => {}} />\n      </RigidBody>\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[-3, 0, 15]}>\n        <Potty color=\"#FFEAA7\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Toilets */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[18, 0, 18]}>\n        <Toilet color=\"#E0BBE4\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Toy boxes */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[-10, 0, -5]}>\n        <ToyBox color=\"#FFDFD3\" onClick={() => {}} />\n      </RigidBody>\n\n      {/* Music system */}\n      <RigidBody type=\"fixed\" colliders=\"cuboid\" position={[10, 0, 10]}>\n        <MusicSystem color=\"#C7CEEA\" onClick={() => {}} />\n      </RigidBody>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2482, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/AccidentMarkers.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\n\nexport function AccidentMarkers() {\n  const accidentsMap = useGameStore((state) => state.accidents)\n  const accidents = useMemo(() => Array.from(accidentsMap.values()), [accidentsMap])\n\n  return (\n    <>{accidents.map((accident) => !accident.cleanedUp && <AccidentMarker key={accident.id} accident={accident} />)}</>\n  )\n}\n\nfunction AccidentMarker({ accident }: { accident: any }) {\n  const color = accident.type === \"pee\" ? \"#FFD700\" : \"#8B4513\"\n  const size = 0.3 + (accident.size / 100) * 0.5\n\n  return (\n    <mesh position={[accident.position.x, 0.02, accident.position.z]} rotation={[-Math.PI / 2, 0, 0]}>\n      <circleGeometry args={[size, 16]} />\n      <meshBasicMaterial color={color} transparent opacity={0.7} />\n    </mesh>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,eAAe,IAAA,6IAAY;sDAAC,CAAC,QAAU,MAAM,SAAS;;IAC5D,MAAM,YAAY,IAAA,wKAAO;8CAAC,IAAM,MAAM,IAAI,CAAC,aAAa,MAAM;6CAAK;QAAC;KAAa;IAEjF,qBACE;kBAAG,UAAU,GAAG,CAAC,CAAC,WAAa,CAAC,SAAS,SAAS,kBAAI,6LAAC;gBAAiC,UAAU;eAAvB,SAAS,EAAE;;;;;;AAE1F;GAPgB;;QACO,6IAAY;;;KADnB;AAShB,SAAS,eAAe,EAAE,QAAQ,EAAqB;IACrD,MAAM,QAAQ,SAAS,IAAI,KAAK,QAAQ,YAAY;IACpD,MAAM,OAAO,MAAM,AAAC,SAAS,IAAI,GAAG,MAAO;IAE3C,qBACE,6LAAC;QAAK,UAAU;YAAC,SAAS,QAAQ,CAAC,CAAC;YAAE;YAAM,SAAS,QAAQ,CAAC,CAAC;SAAC;QAAE,UAAU;YAAC,CAAC,KAAK,EAAE,GAAG;YAAG;YAAG;SAAE;;0BAC9F,6LAAC;gBAAe,MAAM;oBAAC;oBAAM;iBAAG;;;;;;0BAChC,6LAAC;gBAAkB,OAAO;gBAAO,WAAW;gBAAC,SAAS;;;;;;;;;;;;AAG5D;MAVS"}},
    {"offset": {"line": 2572, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/LoadingFallback.tsx"],"sourcesContent":["\"use client\"\n\nimport { Html } from \"@react-three/drei\"\n\nexport function LoadingFallback() {\n  return (\n    <Html center>\n      <div className=\"flex flex-col items-center gap-4 p-8 bg-primary/10 rounded-xl backdrop-blur-sm\">\n        <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n        <p className=\"text-lg font-medium text-foreground\">Loading Daycare...</p>\n      </div>\n    </Html>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,6LAAC,kKAAI;QAAC,MAAM;kBACV,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAE,WAAU;8BAAsC;;;;;;;;;;;;;;;;;AAI3D;KATgB"}},
    {"offset": {"line": 2624, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/rules/gameRules.ts"],"sourcesContent":["import type {\n  AgeGroup,\n  UnderwearType,\n  CaregiverPersonality,\n  BehaviorEvent,\n  BehaviorSeverity,\n  VoiceEmotion,\n} from \"./gameTypes\"\n\nexport interface AgeRules {\n  canChooseClothes: boolean\n  canTogglePacifier: boolean\n  alwaysHasPacifier: boolean\n  allowedUnderwear: UnderwearType[]\n  canUsePotty: boolean\n  canUseToilet: (currentUnderwear: UnderwearType) => boolean\n  defaultAnimation: \"crawl\" | \"walk\"\n  defaultClothing: {\n    shirt: boolean\n    pants: boolean\n    socks: boolean\n    shoes: boolean\n    underwearType: UnderwearType\n    pacifierIn: boolean\n  }\n}\n\nexport const AGE_RULES: Record<AgeGroup, AgeRules> = {\n  \"1-4\": {\n    canChooseClothes: false,\n    canTogglePacifier: false,\n    alwaysHasPacifier: true,\n    allowedUnderwear: [\"diaper\"],\n    canUsePotty: false,\n    canUseToilet: () => false,\n    defaultAnimation: \"crawl\",\n    defaultClothing: {\n      shirt: false,\n      pants: false,\n      socks: false,\n      shoes: false,\n      underwearType: \"diaper\",\n      pacifierIn: true,\n    },\n  },\n  \"4-7\": {\n    canChooseClothes: false,\n    canTogglePacifier: true,\n    alwaysHasPacifier: false,\n    allowedUnderwear: [\"diaper\", \"training_pants\", \"underwear\"],\n    canUsePotty: true,\n    canUseToilet: (underwear) => underwear === \"training_pants\" || underwear === \"underwear\",\n    defaultAnimation: \"walk\",\n    defaultClothing: {\n      shirt: true,\n      pants: true,\n      socks: true,\n      shoes: true,\n      underwearType: \"training_pants\",\n      pacifierIn: false,\n    },\n  },\n  \"7-9\": {\n    canChooseClothes: true,\n    canTogglePacifier: false,\n    alwaysHasPacifier: false,\n    allowedUnderwear: [\"diaper\", \"training_pants\", \"underwear\"],\n    canUsePotty: true,\n    canUseToilet: (underwear) => underwear === \"training_pants\" || underwear === \"underwear\",\n    defaultAnimation: \"walk\",\n    defaultClothing: {\n      shirt: true,\n      pants: true,\n      socks: true,\n      shoes: true,\n      underwearType: \"underwear\",\n      pacifierIn: false,\n    },\n  },\n  \"12+\": {\n    canChooseClothes: true,\n    canTogglePacifier: false,\n    alwaysHasPacifier: false,\n    allowedUnderwear: [\"diaper\", \"training_pants\", \"underwear\"],\n    canUsePotty: true,\n    canUseToilet: (underwear) => underwear === \"training_pants\" || underwear === \"underwear\",\n    defaultAnimation: \"walk\",\n    defaultClothing: {\n      shirt: true,\n      pants: true,\n      socks: true,\n      shoes: true,\n      underwearType: \"underwear\",\n      pacifierIn: false,\n    },\n  },\n}\n\n// AI Caregiver Personality and Behavior Rules\nexport interface AICaregiverRules {\n  maxPatrolDistance: number\n  reactionTime: number // milliseconds\n  interventionThresholds: {\n    safety: BehaviorSeverity\n    ruleViolation: BehaviorSeverity\n    disruption: BehaviorSeverity\n  }\n  voiceSettings: {\n    defaultEmotion: VoiceEmotion\n    firmnessThreshold: number // 0-100, when to switch to firm tone\n    nurturingThreshold: number // 0-100, when to show nurturing behavior\n  }\n  personalityModifiers: {\n    strictness: number // affects intervention frequency\n    nurturing: number // affects reward and comfort behaviors\n    patience: number // affects timeout duration tolerance\n    fairness: number // affects consistency in rule enforcement\n    responsiveness: number // affects reaction speed to events\n  }\n}\n\nexport const AI_CAREGIVER_RULES: AICaregiverRules = {\n  maxPatrolDistance: 10.0, // units\n  reactionTime: 500, // milliseconds\n  interventionThresholds: {\n    safety: 2,\n    ruleViolation: 3,\n    disruption: 4,\n  },\n  voiceSettings: {\n    defaultEmotion: \"caring\",\n    firmnessThreshold: 70,\n    nurturingThreshold: 30,\n  },\n  personalityModifiers: {\n    strictness: 0.5,\n    nurturing: 0.5,\n    patience: 0.5,\n    fairness: 0.5,\n    responsiveness: 0.5,\n  },\n}\n\nexport interface CaregiverOverride {\n  canForceUnderwear: boolean\n  canForceTimeout: boolean\n  canChangeClothes: boolean\n  canUsePhysicalControl: boolean\n  canEscort: boolean\n  canSpeak: boolean // AI caregivers can speak\n}\n\nexport function getCaregiverPermissions(targetAgeGroup: AgeGroup): CaregiverOverride {\n  return {\n    canForceUnderwear: targetAgeGroup === \"1-4\" || targetAgeGroup === \"4-7\",\n    canForceTimeout: true,\n    canChangeClothes: true,\n    canUsePhysicalControl: targetAgeGroup === \"1-4\" || targetAgeGroup === \"4-7\",\n    canEscort: true,\n    canSpeak: true, // AI caregivers can always speak\n  }\n}\n\nexport function getAICaregiverRules(): AICaregiverRules {\n  return AI_CAREGIVER_RULES\n}\n\nexport function calculatePersonalityModifiers(\n  personality: CaregiverPersonality,\n): AICaregiverRules[\"personalityModifiers\"] {\n  return {\n    strictness: personality.strictness / 100,\n    nurturing: personality.nurturing / 100,\n    patience: personality.patience / 100,\n    fairness: personality.fairness / 100,\n    responsiveness: personality.responsiveness / 100,\n  }\n}\n\nexport function shouldAICaregiverIntervene(event: BehaviorEvent, personality: CaregiverPersonality): boolean {\n  const rules = getAICaregiverRules()\n  // Map the category string to the correct property name\n  const categoryKey = event.category === \"rule_violation\" ? \"ruleViolation\" : event.category\n  const threshold = rules.interventionThresholds[categoryKey]\n\n  // Adjust threshold based on personality\n  let adjustedThreshold = threshold\n\n  // Strict caregivers intervene more frequently\n  if (personality.strictness > 70) {\n    adjustedThreshold = Math.max(1, threshold - 1) as BehaviorSeverity\n  }\n  // Nurturing caregivers are more tolerant\n  else if (personality.nurturing > 70) {\n    adjustedThreshold = Math.min(5, threshold + 1) as BehaviorSeverity\n  }\n\n  return event.severity >= adjustedThreshold\n}\n\nexport function getAICaregiverVoiceEmotion(\n  personality: CaregiverPersonality,\n  context: \"normal\" | \"warning\" | \"discipline\" | \"comfort\",\n): VoiceEmotion {\n  const rules = getAICaregiverRules()\n\n  switch (context) {\n    case \"normal\":\n      return rules.voiceSettings.defaultEmotion\n    case \"warning\":\n      return personality.strictness > rules.voiceSettings.firmnessThreshold ? \"firm\" : \"caring\"\n    case \"discipline\":\n      return \"stern\"\n    case \"comfort\":\n      return \"caring\" // Use 'caring' instead of 'nurturing'\n    default:\n      return rules.voiceSettings.defaultEmotion\n  }\n}\n\nexport function calculateInterventionConfidence(event: BehaviorEvent, personality: CaregiverPersonality): number {\n  let baseConfidence = 0.5\n\n  // Higher strictness increases confidence in interventions\n  baseConfidence += (personality.strictness - 50) / 100\n\n  // Higher severity increases confidence\n  baseConfidence += (event.severity - 1) * 0.1\n\n  // Higher responsiveness increases confidence\n  baseConfidence += (personality.responsiveness - 50) / 200\n\n  return Math.max(0.1, Math.min(1.0, baseConfidence))\n}\n\n// Age-based rules\nexport function getAgeRules(ageGroup: AgeGroup): AgeRules {\n  return AGE_RULES[ageGroup]\n}\n\nexport function canChangeUnderwear(ageGroup: AgeGroup, newType: UnderwearType): boolean {\n  const rules = AGE_RULES[ageGroup]\n  return rules.allowedUnderwear.includes(newType)\n}\n\nexport function canUseToiletWithCurrentUnderwear(ageGroup: AgeGroup, underwearType: UnderwearType): boolean {\n  const rules = AGE_RULES[ageGroup]\n  return rules.canUseToilet(underwearType)\n}\n\nexport function shouldShowPacifier(ageGroup: AgeGroup, pacifierIn: boolean): boolean {\n  const rules = AGE_RULES[ageGroup]\n  if (rules.alwaysHasPacifier) return true\n  if (ageGroup === \"7-9\" || ageGroup === \"12+\") return false\n  return pacifierIn\n}\n\nexport function getDefaultClothingForAge(ageGroup: AgeGroup) {\n  return AGE_RULES[ageGroup].defaultClothing\n}\n\nexport function getAnimationForAge(ageGroup: AgeGroup): \"crawl\" | \"walk\" {\n  return AGE_RULES[ageGroup].defaultAnimation\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/NeedsSystem.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { getAgeRules } from \"@/lib/rules/gameRules\"\n\n/**\n * Needs System - Manages player needs (bladder, bowel, hunger)\n * Runs independently and updates player state\n */\nexport function useNeedsSystem() {\n  const playersMap = useGameStore((state) => state.players)\n  const updatePlayerNeeds = useGameStore((state) => state.updatePlayerNeeds)\n  const updatePlayerClothing = useGameStore((state) => state.updatePlayerClothing)\n  const addAccident = useGameStore((state) => state.addAccident)\n\n  const playerIdsRef = useRef<Set<string>>(new Set())\n\n  useEffect(() => {\n    const players = Array.from(playersMap.values())\n\n    const interval = setInterval(() => {\n      players.forEach((player) => {\n        // Skip caregivers\n        if (player.role === \"caregiver\") return\n\n        const ageRules = getAgeRules(player.character.ageGroup)\n        const newNeeds = { ...player.needs }\n\n        // Increase needs over time\n        newNeeds.bladder = Math.min(100, player.needs.bladder + Math.random() * 2)\n        newNeeds.bowel = Math.min(100, player.needs.bowel + Math.random() * 1)\n        newNeeds.hunger = Math.min(100, player.needs.hunger + Math.random() * 0.5)\n\n        updatePlayerNeeds(player.id, newNeeds)\n\n        // Check for accidents\n        if (newNeeds.bladder >= 100 && player.clothing.underwearType === \"diaper\") {\n          // Automatic wetting in diaper\n          const newFillLevel = Math.min(5, player.clothing.diaperFillLevel + 1)\n          const newState = player.clothing.underwearState === \"messy\" ? \"both\" : \"wet\"\n\n          updatePlayerClothing(player.id, {\n            diaperFillLevel: newFillLevel,\n            underwearState: newState,\n          })\n\n          // Reset bladder\n          updatePlayerNeeds(player.id, { bladder: 0 })\n        } else if (newNeeds.bladder >= 100 && player.clothing.underwearType !== \"diaper\") {\n          // Accident on floor\n          addAccident({\n            id: `accident_${Date.now()}_${player.id}`,\n            type: \"pee\",\n            position: player.position,\n            playerId: player.id,\n            timestamp: Date.now(),\n            cleanedUp: false,\n            size: 50 + Math.random() * 50,\n            cause: \"bladder_full\",\n          })\n\n          // Wet underwear\n          updatePlayerClothing(player.id, {\n            underwearState: player.clothing.underwearState === \"messy\" ? \"both\" : \"wet\",\n          })\n\n          // Reset bladder\n          updatePlayerNeeds(player.id, { bladder: 0 })\n        }\n\n        // Bowel accidents\n        if (newNeeds.bowel >= 100) {\n          if (player.clothing.underwearType === \"diaper\") {\n            // Mess in diaper\n            const newFillLevel = Math.min(5, player.clothing.diaperFillLevel + 2)\n            const newState = player.clothing.underwearState === \"wet\" ? \"both\" : \"messy\"\n\n            updatePlayerClothing(player.id, {\n              diaperFillLevel: newFillLevel,\n              underwearState: newState,\n            })\n\n            // Reset bowel\n            updatePlayerNeeds(player.id, { bowel: 0 })\n          } else {\n            // Accident on floor\n            addAccident({\n              id: `accident_${Date.now()}_${player.id}`,\n              type: \"poop\",\n              position: player.position,\n              playerId: player.id,\n              timestamp: Date.now(),\n              cleanedUp: false,\n              size: 30 + Math.random() * 40,\n              cause: \"bowel_full\",\n            })\n\n            // Messy underwear\n            updatePlayerClothing(player.id, {\n              underwearState: player.clothing.underwearState === \"wet\" ? \"both\" : \"messy\",\n            })\n\n            // Reset bowel\n            updatePlayerNeeds(player.id, { bowel: 0 })\n          }\n        }\n      })\n    }, 5000) // Update every 5 seconds\n\n    return () => clearInterval(interval)\n  }, [playersMap.size, updatePlayerNeeds, updatePlayerClothing, addAccident])\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2998, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/three/DaycareScene.tsx"],"sourcesContent":["\"use client\"\n\nimport { Canvas } from \"@react-three/fiber\"\nimport { Physics } from \"@react-three/rapier\"\nimport { Sky, Environment } from \"@react-three/drei\"\nimport { Suspense } from \"react\"\nimport { DaycareEnvironment } from \"./DaycareEnvironment\"\nimport { DaycareObjects } from \"./DaycareObjects\"\nimport { PlayerCharacters } from \"./PlayerCharacters\"\nimport { CaregiverCharacters } from \"./CaregiverCharacters\"\nimport { AccidentMarkers } from \"./AccidentMarkers\"\nimport { LoadingFallback } from \"./LoadingFallback\"\nimport { useNeedsSystem } from \"./NeedsSystem\"\n\nexport function DaycareScene() {\n  useNeedsSystem()\n\n  return (\n    <div className=\"w-full h-screen\">\n      <Canvas\n        shadows\n        camera={{\n          position: [0, 5, 10],\n          fov: 60,\n          near: 0.1,\n          far: 1000,\n        }}\n        gl={{\n          antialias: true,\n          alpha: false,\n          powerPreference: \"high-performance\",\n        }}\n      >\n        <Suspense fallback={<LoadingFallback />}>\n          {/* Lighting */}\n          <ambientLight intensity={0.6} color=\"#FFE5EC\" />\n          <directionalLight\n            position={[10, 20, 10]}\n            intensity={0.8}\n            castShadow\n            shadow-mapSize-width={2048}\n            shadow-mapSize-height={2048}\n            shadow-camera-far={50}\n            shadow-camera-left={-30}\n            shadow-camera-right={30}\n            shadow-camera-top={30}\n            shadow-camera-bottom={-30}\n            color=\"#FFFAF0\"\n          />\n          <pointLight position={[-10, 10, -10]} intensity={0.3} color=\"#E0BBE4\" />\n          <pointLight position={[10, 10, 10]} intensity={0.3} color=\"#FFDFD3\" />\n\n          {/* Pastel sky */}\n          <Sky\n            distance={450000}\n            sunPosition={[10, 20, 10]}\n            inclination={0.6}\n            azimuth={0.25}\n            turbidity={2}\n            rayleigh={0.5}\n          />\n\n          {/* Physics world with gravity */}\n          <Physics gravity={[0, -9.81, 0]} debug={false} timeStep={1 / 60} numSolverIterations={10}>\n            {/* Ground and walls */}\n            <DaycareEnvironment />\n\n            {/* Interactive objects */}\n            <DaycareObjects />\n\n            {/* Player characters */}\n            <PlayerCharacters />\n\n            {/* AI Caregiver NPCs */}\n            <CaregiverCharacters />\n\n            {/* Accident markers */}\n            <AccidentMarkers />\n          </Physics>\n\n          {/* Environment lighting */}\n          <Environment preset=\"apartment\" background={false} />\n        </Suspense>\n      </Canvas>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAGA;AACA;AACA;;;AAZA;;;;;;;;;;;;AAcO,SAAS;;IACd,IAAA,wJAAc;IAEd,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,gNAAM;YACL,OAAO;YACP,QAAQ;gBACN,UAAU;oBAAC;oBAAG;oBAAG;iBAAG;gBACpB,KAAK;gBACL,MAAM;gBACN,KAAK;YACP;YACA,IAAI;gBACF,WAAW;gBACX,OAAO;gBACP,iBAAiB;YACnB;sBAEA,cAAA,6LAAC,yKAAQ;gBAAC,wBAAU,6LAAC,6JAAe;;;;;;kCAElC,6LAAC;wBAAa,WAAW;wBAAK,OAAM;;;;;;kCACpC,6LAAC;wBACC,UAAU;4BAAC;4BAAI;4BAAI;yBAAG;wBACtB,WAAW;wBACX,UAAU;wBACV,wBAAsB;wBACtB,yBAAuB;wBACvB,qBAAmB;wBACnB,sBAAoB,CAAC;wBACrB,uBAAqB;wBACrB,qBAAmB;wBACnB,wBAAsB,CAAC;wBACvB,OAAM;;;;;;kCAER,6LAAC;wBAAW,UAAU;4BAAC,CAAC;4BAAI;4BAAI,CAAC;yBAAG;wBAAE,WAAW;wBAAK,OAAM;;;;;;kCAC5D,6LAAC;wBAAW,UAAU;4BAAC;4BAAI;4BAAI;yBAAG;wBAAE,WAAW;wBAAK,OAAM;;;;;;kCAG1D,6LAAC,iKAAG;wBACF,UAAU;wBACV,aAAa;4BAAC;4BAAI;4BAAI;yBAAG;wBACzB,aAAa;wBACb,SAAS;wBACT,WAAW;wBACX,UAAU;;;;;;kCAIZ,6LAAC,mNAAO;wBAAC,SAAS;4BAAC;4BAAG,CAAC;4BAAM;yBAAE;wBAAE,OAAO;wBAAO,UAAU,IAAI;wBAAI,qBAAqB;;0CAEpF,6LAAC,mKAAkB;;;;;0CAGnB,6LAAC,2JAAc;;;;;0CAGf,6LAAC;;;;;0CAGD,6LAAC;;;;;0CAGD,6LAAC,6JAAe;;;;;;;;;;;kCAIlB,6LAAC,iLAAW;wBAAC,QAAO;wBAAY,YAAY;;;;;;;;;;;;;;;;;;;;;;AAKtD;GAxEgB;;QACd,wJAAc;;;KADA"}},
    {"offset": {"line": 3218, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 3236, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 3356, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 3400, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/hooks/usePlayerActions.ts"],"sourcesContent":["\"use client\"\n\nimport { useCallback } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { getAgeRules, canChangeUnderwear } from \"@/lib/rules/gameRules\"\nimport type { UnderwearType } from \"@/lib/types/gameTypes\"\n\nexport function usePlayerActions() {\n  const currentPlayerId = useGameStore((state) => state.currentPlayerId)\n  const currentPlayer = useGameStore((state) =>\n    state.currentPlayerId ? state.players.get(state.currentPlayerId) : null,\n  )\n  const updatePlayerClothing = useGameStore((state) => state.updatePlayerClothing)\n  const updatePlayerNeeds = useGameStore((state) => state.updatePlayerNeeds)\n  const addMessage = useGameStore((state) => state.addMessage)\n\n  const togglePacifier = useCallback(() => {\n    if (!currentPlayer) return\n\n    const ageRules = getAgeRules(currentPlayer.character.ageGroup)\n    if (!ageRules.canTogglePacifier) {\n      addMessage({\n        id: `msg_${Date.now()}`,\n        senderId: \"system\",\n        senderName: \"System\",\n        content: \"You cannot remove your pacifier at this age.\",\n        timestamp: Date.now(),\n        isSystem: true,\n        messageType: \"announcement\",\n      })\n      return\n    }\n\n    updatePlayerClothing(currentPlayer.id, {\n      pacifierIn: !currentPlayer.clothing.pacifierIn,\n    })\n  }, [currentPlayer, updatePlayerClothing, addMessage])\n\n  const changeUnderwear = useCallback(\n    (newType: UnderwearType) => {\n      if (!currentPlayer) return\n\n      if (!canChangeUnderwear(currentPlayer.character.ageGroup, newType)) {\n        addMessage({\n          id: `msg_${Date.now()}`,\n          senderId: \"system\",\n          senderName: \"System\",\n          content: `You cannot wear ${newType} at your age.`,\n          timestamp: Date.now(),\n          isSystem: true,\n          messageType: \"announcement\",\n        })\n        return\n      }\n\n      updatePlayerClothing(currentPlayer.id, {\n        underwearType: newType,\n        underwearState: \"clean\",\n        diaperFillLevel: 0,\n      })\n\n      addMessage({\n        id: `msg_${Date.now()}`,\n        senderId: \"system\",\n        senderName: \"System\",\n        content: `Changed to ${newType}.`,\n        timestamp: Date.now(),\n        isSystem: true,\n        messageType: \"announcement\",\n      })\n    },\n    [currentPlayer, updatePlayerClothing, addMessage],\n  )\n\n  const usePotty = useCallback(() => {\n    if (!currentPlayer) return\n\n    const ageRules = getAgeRules(currentPlayer.character.ageGroup)\n    if (!ageRules.canUsePotty) {\n      addMessage({\n        id: `msg_${Date.now()}`,\n        senderId: \"system\",\n        senderName: \"System\",\n        content: \"You need help using the potty.\",\n        timestamp: Date.now(),\n        isSystem: true,\n        messageType: \"announcement\",\n      })\n      return\n    }\n\n    // Check if near a potty (would need object proximity check)\n    updatePlayerNeeds(currentPlayer.id, {\n      bladder: Math.max(0, currentPlayer.needs.bladder - 50),\n    })\n\n    addMessage({\n      id: `msg_${Date.now()}`,\n      senderId: \"system\",\n      senderName: \"System\",\n      content: \"You used the potty!\",\n      timestamp: Date.now(),\n      isSystem: true,\n      messageType: \"announcement\",\n    })\n  }, [currentPlayer, updatePlayerNeeds, addMessage])\n\n  const useToilet = useCallback(() => {\n    if (!currentPlayer) return\n\n    const ageRules = getAgeRules(currentPlayer.character.ageGroup)\n    if (!ageRules.canUseToilet(currentPlayer.clothing.underwearType)) {\n      addMessage({\n        id: `msg_${Date.now()}`,\n        senderId: \"system\",\n        senderName: \"System\",\n        content: \"You cannot use the toilet with your current underwear.\",\n        timestamp: Date.now(),\n        isSystem: true,\n        messageType: \"announcement\",\n      })\n      return\n    }\n\n    updatePlayerNeeds(currentPlayer.id, {\n      bladder: 0,\n      bowel: 0,\n    })\n\n    addMessage({\n      id: `msg_${Date.now()}`,\n      senderId: \"system\",\n      senderName: \"System\",\n      content: \"You used the toilet!\",\n      timestamp: Date.now(),\n      isSystem: true,\n      messageType: \"announcement\",\n    })\n  }, [currentPlayer, updatePlayerNeeds, addMessage])\n\n  return {\n    togglePacifier,\n    changeUnderwear,\n    usePotty,\n    useToilet,\n    currentPlayer,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3583, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/types/gameTypes.ts"],"sourcesContent":["import { z } from \"zod\"\n\nexport type PlayerRole = \"caregiver\" | \"little\"\nexport type Gender = \"male\" | \"female\"\nexport type AgeGroup = \"1-4\" | \"4-7\" | \"7-9\" | \"12+\"\nexport type DisciplineStatus = \"green\" | \"yellow\" | \"red\"\nexport type UnderwearType = \"diaper\" | \"training_pants\" | \"underwear\"\nexport type UnderwearState = \"clean\" | \"wet\" | \"messy\" | \"both\"\nexport type AdminRole = \"owner\" | \"admin\" | \"mod\" | \"none\"\nexport type SpankingImplement = \"hand\" | \"paddle\" | \"belt\"\nexport type BehaviorSeverity = 1 | 2 | 3 | 4 | 5\nexport type AuthorityActionType =\n  | \"escort\"\n  | \"physical_control\"\n  | \"relocation\"\n  | \"cooldown\"\n  | \"mouth_soaping\"\n  | \"disciplinary_action\"\n  | \"spanking_otk\"\nexport type Alignment = \"little_angel\" | \"good_boy_girl\" | \"boy_girl\" | \"bad_boy_girl\" | \"little_shit\"\nexport type VoiceEmotion = \"neutral\" | \"caring\" | \"firm\" | \"playful\" | \"stern\"\nexport type VoiceProvider = \"inworld\" | \"eastworld\" | \"bark\" | \"elevenlabs\"\nexport type VoiceRecognitionProvider = \"elevenlabs\" | \"openai\" | \"whisper\"\nexport type VoiceSynthesisProvider = \"elevenlabs\" | \"bark\" | \"inworld\"\nexport type PunishmentType = \"timeout\" | \"spanking\" | \"warning\" | \"mouth_soap\" | \"privilege_loss\"\nexport type MessageType = \"chat\" | \"whisper\" | \"announcement\" | \"punishment\" | \"reward\"\nexport type EntityType = \"player\" | \"npc\" | \"object\" | \"accident\"\nexport type SoundEventType = \"voice\" | \"cry\" | \"music\" | \"ambient\"\nexport type ControlIntensity = \"light\" | \"firm\"\nexport type ControlPoint = \"arm\" | \"shoulder\" | \"upper_back\"\nexport type RestrictedCapability = \"movement\" | \"interaction\" | \"voice\"\nexport type DisciplinaryEffect = \"morale_penalty\" | \"privilege_loss\" | \"reputation_change\"\nexport type BehaviorCategory = \"safety\" | \"rule_violation\" | \"disruption\"\nexport type ConstraintType = \"time\" | \"cooldown\" | \"energy\" | \"authority\"\nexport type Rotation = number\n\nexport interface Vector3 {\n  x: number\n  y: number\n  z: number\n}\n\n// AI Perception and World State Interfaces\nexport interface EntityRef {\n  id: string\n  type: EntityType\n  position: Vector3\n}\n\nexport interface SoundEvent {\n  id: string\n  type: SoundEventType\n  source: string\n  position: Vector3\n  intensity: number\n  timestamp: number\n}\n\nexport interface Perception {\n  visibleEntities: EntityRef[]\n  distances: Map<string, number>\n  occluded: boolean\n  audioEvents: SoundEvent[]\n}\n\nexport interface WorldState {\n  navmesh: any // Simplified navmesh data\n  hazards: string[]\n  interactables: Map<string, InteractiveObject>\n}\n\nexport interface Intent {\n  goals: Goal[]\n  constraints: Constraint[]\n  cooldowns: Map<string, number>\n}\n\nexport interface Goal {\n  id: string\n  priority: number\n  description: string\n  targetId?: string\n  location?: Vector3\n}\n\nexport interface Constraint {\n  type: ConstraintType\n  value: number\n  description: string\n}\n\n// Voice System Interfaces\nexport interface VoiceProfile {\n  provider: VoiceProvider\n  voiceId: string\n  pitch: number\n  speed: number\n  emotion: VoiceEmotion\n  recognitionProvider: VoiceRecognitionProvider\n  synthesisProvider: VoiceSynthesisProvider\n}\n\nexport interface VoiceRecognitionResult {\n  text: string\n  confidence: number\n  language: string\n  duration: number\n}\n\nexport interface VoiceSynthesisOptions {\n  voiceId: string\n  stability?: number\n  similarityBoost?: number\n  style?: number\n  useSpeakerBoost?: boolean\n}\n\nexport interface VoiceService {\n  // Speech Recognition (STT)\n  recognizeSpeech(audioData: ArrayBuffer): Promise<VoiceRecognitionResult>\n  startContinuousRecognition(): Promise<void>\n  stopContinuousRecognition(): Promise<string>\n\n  // Speech Synthesis (TTS)\n  synthesizeSpeech(text: string, options: VoiceSynthesisOptions): Promise<ArrayBuffer>\n\n  // Voice Management\n  getAvailableVoices(): Promise<VoiceProfile[]>\n  createVoiceProfile(voiceId: string): Promise<VoiceProfile>\n\n  // Audio Processing\n  processAudioInput(stream: MediaStream): Promise<void>\n  setAudioLevelCallback(callback: (level: number) => void): void\n\n  // Configuration\n  setRecognitionLanguage(language: string): void\n  setSynthesisLanguage(language: string): void\n  setVoiceProfile(profile: VoiceProfile): void\n}\n\n// Behavior and Authority System Interfaces\nexport interface BehaviorEvent {\n  id: string\n  actorId: string\n  category: BehaviorCategory\n  severity: BehaviorSeverity\n  timestamp: number\n  description: string\n  evidence?: string[]\n}\n\nexport interface PhysicalControlAction {\n  type: \"physical_control\"\n  authorityId: string\n  targetId: string\n  controlPoint: ControlPoint\n  intensity: ControlIntensity\n  durationMs: number\n}\n\nexport interface EscortAction {\n  type: \"escort\"\n  authorityId: string\n  targetId: string\n  destinationId: string\n  canResist: boolean\n  reason: string\n}\n\nexport interface CooldownAction {\n  type: \"cooldown\"\n  targetId: string\n  durationMs: number // hard-cap enforced (e.g. 5 min)\n  restrictedCapabilities: RestrictedCapability[]\n  reason: string\n}\n\nexport interface DisciplinaryAction {\n  type: \"disciplinary_action\"\n  targetId: string\n  effect: DisciplinaryEffect\n  magnitude: number\n  reason: string\n}\n\nexport type AuthorityIntervention = PhysicalControlAction | EscortAction | CooldownAction | DisciplinaryAction\n\nexport interface AuthorityDecision {\n  authorityId: string\n  targetId: string\n  triggeringEventId: string\n  confidence: number\n  interventions: AuthorityIntervention[]\n  reasoning: string\n}\n\nexport interface CharacterCustomization {\n  skinColor: string\n  ageGroup: AgeGroup\n  hairColor?: string\n  eyeColor?: string\n  facialFeatures?: string[]\n}\n\nexport interface ClothingState {\n  shirt: boolean\n  pants: boolean\n  socks: boolean\n  shoes: boolean\n  underwearType: UnderwearType\n  underwearState: UnderwearState\n  diaperFillLevel: number\n  pacifierIn: boolean\n}\n\nexport interface NeedGauges {\n  bladder: number\n  bowel: number\n  hunger: number\n}\n\nexport interface Player {\n  id: string\n  name: string\n  role: PlayerRole\n  gender: Gender\n  adminRole: AdminRole\n  character: CharacterCustomization\n  clothing: ClothingState\n  needs: NeedGauges\n  position: Vector3\n  rotation: Rotation\n  disciplineStatus: DisciplineStatus\n  alignment: Alignment\n  isInTimeout: boolean\n  timeoutEndTime?: number\n  isBeingLed: boolean\n  ledBy?: string\n  currentAnimation: string\n  privileges: string[]\n  rewards: Reward[]\n  punishments: Punishment[]\n  voiceId?: string\n  lastVoiceActivity?: number\n}\n\nexport interface CaregiverPersonality {\n  strictness: number // 0-100\n  nurturing: number // 0-100\n  patience: number // 0-100\n  fairness: number // 0-100\n  responsiveness: number // 0-100\n}\n\nexport interface Caregiver extends Player {\n  role: \"caregiver\"\n  personality: CaregiverPersonality\n  perception: Perception\n  worldState: WorldState\n  currentIntent: Intent\n  voiceProfile: VoiceProfile\n  isAI: boolean\n  lastDecisionTime?: number\n}\n\nexport interface Reward {\n  id: string\n  name: string\n  description: string\n  givenBy: string\n  timestamp: number\n  alignmentBonus: number\n}\n\nexport interface Punishment {\n  id: string\n  type: PunishmentType\n  reason: string\n  givenBy: string\n  timestamp: number\n  duration?: number\n  implement?: SpankingImplement\n  alignmentPenalty: number\n}\n\nexport interface LobbySettings {\n  name: string\n  maxPlayers: number\n  staffOnlyRoleChanges: boolean\n  staffOnlyGenderChanges: boolean\n  isPrivate: boolean\n  monetizationEnabled: boolean\n  trialDays: number\n}\n\nexport interface Lobby {\n  id: string\n  inviteCode: string\n  settings: LobbySettings\n  ownerId: string\n  players: Map<string, Player>\n  caregivers: Map<string, Caregiver>\n  objects: Map<string, InteractiveObject>\n  accidents: Map<string, Accident>\n  createdAt: number\n  trialEndDate?: number\n  isSuspended: boolean\n}\n\nexport interface ChatMessage {\n  id: string\n  senderId: string\n  senderName: string\n  content: string\n  timestamp: number\n  isSystem: boolean\n  messageType: MessageType\n  alignmentChange?: number\n}\n\nexport interface Accident {\n  id: string\n  type: \"pee\" | \"poop\"\n  position: Vector3\n  playerId: string\n  timestamp: number\n  cleanedUp: boolean\n  size: number // 0-100%\n  cause?: string\n}\n\nexport interface InteractiveObject {\n  id: string\n  type:\n    | \"slide\"\n    | \"changing_station\"\n    | \"timeout_chair\"\n    | \"timeout_stool\"\n    | \"play_area\"\n    | \"potty\"\n    | \"toilet_male\"\n    | \"toilet_female\"\n    | \"toy_box\"\n    | \"music_system\"\n  position: Vector3\n  rotation: Rotation\n  isOccupied: boolean\n  occupiedBy?: string\n  isLocked: boolean\n  requiredPrivilege?: string\n  interactionRadius: number\n}\n\nexport type ClientMessage =\n  | { type: \"join_lobby\"; lobbyId: string; player: Omit<Player, \"id\"> }\n  | { type: \"create_lobby\"; settings: LobbySettings; player: Omit<Player, \"id\"> }\n  | { type: \"leave_lobby\" }\n  | { type: \"move\"; position: Vector3; rotation: Rotation }\n  | { type: \"animation\"; animation: string }\n  | { type: \"chat\"; content: string; messageType?: \"chat\" | \"whisper\" }\n  | { type: \"voice_message\"; audioData: ArrayBuffer }\n  | { type: \"update_role\"; targetId: string; role: PlayerRole }\n  | { type: \"update_gender\"; targetId: string; gender: Gender }\n  | { type: \"update_admin_role\"; targetId: string; adminRole: AdminRole }\n  | { type: \"update_settings\"; settings: Partial<LobbySettings> }\n  | { type: \"discipline\"; targetId: string; status: DisciplineStatus }\n  | { type: \"give_reward\"; targetId: string; reward: Omit<Reward, \"id\" | \"givenBy\" | \"timestamp\"> }\n  | { type: \"give_punishment\"; targetId: string; punishment: Omit<Punishment, \"id\" | \"givenBy\" | \"timestamp\"> }\n  | { type: \"start_leading\"; targetId: string }\n  | { type: \"stop_leading\" }\n  | { type: \"interact_object\"; objectId: string; action: string }\n  | { type: \"change_clothing\"; clothing: Partial<ClothingState> }\n  | { type: \"use_potty\" }\n  | { type: \"eat_food\"; foodType: string }\n  | { type: \"drink\"; liquidType: string }\n  | { type: \"change_diaper\"; targetId: string; newType: UnderwearType }\n  | { type: \"clean_accident\"; accidentId: string }\n  | { type: \"ai_caregiver_command\"; caregiverId: string; command: string }\n\nexport type ServerMessage =\n  | { type: \"lobby_joined\"; lobby: SerializedLobby; playerId: string }\n  | { type: \"lobby_created\"; lobby: SerializedLobby; playerId: string; inviteCode: string }\n  | { type: \"player_joined\"; player: Player }\n  | { type: \"player_left\"; playerId: string }\n  | { type: \"player_moved\"; playerId: string; position: Vector3; rotation: Rotation }\n  | { type: \"player_animation\"; playerId: string; animation: string }\n  | { type: \"chat_message\"; message: ChatMessage }\n  | { type: \"voice_message\"; senderId: string; audioData: ArrayBuffer }\n  | { type: \"player_updated\"; player: Player }\n  | { type: \"settings_updated\"; settings: LobbySettings }\n  | { type: \"discipline_updated\"; playerId: string; status: DisciplineStatus }\n  | { type: \"alignment_updated\"; playerId: string; alignment: Alignment; change: number }\n  | { type: \"reward_given\"; playerId: string; reward: Reward }\n  | { type: \"punishment_given\"; playerId: string; punishment: Punishment }\n  | { type: \"leading_started\"; leaderId: string; targetId: string }\n  | { type: \"leading_stopped\"; leaderId: string; targetId: string }\n  | { type: \"object_state\"; objectId: string; isOccupied: boolean; occupiedBy?: string }\n  | { type: \"object_occupied\"; objectId: string; playerId: string; objectType: string }\n  | { type: \"object_vacated\"; objectId: string; playerId: string }\n  | { type: \"clothing_changed\"; playerId: string; clothing: ClothingState }\n  | { type: \"needs_updated\"; playerId: string; needs: NeedGauges }\n  | { type: \"accident_occurred\"; accident: Accident }\n  | { type: \"accident_cleaned\"; accidentId: string }\n  | { type: \"diaper_change_started\"; caregiverId: string; littleId: string }\n  | { type: \"diaper_change_completed\"; caregiverId: string; littleId: string }\n  | { type: \"timeout_started\"; playerId: string; duration: number; reason: string }\n  | { type: \"timeout_ended\"; playerId: string }\n  | { type: \"ai_caregiver_action\"; caregiverId: string; action: AuthorityDecision }\n  | { type: \"ai_caregiver_speech\"; caregiverId: string; message: string }\n  | { type: \"error\"; message: string }\n\nexport interface SerializedLobby {\n  id: string\n  inviteCode: string\n  settings: LobbySettings\n  ownerId: string\n  players: Player[]\n  caregivers: Caregiver[]\n  objects: InteractiveObject[]\n  accidents: Accident[]\n  createdAt: number\n  trialEndDate?: number\n  isSuspended: boolean\n}\n\nexport const lobbySettingsSchema = z.object({\n  name: z.string().min(1).max(50),\n  maxPlayers: z.number().min(2).max(20),\n  staffOnlyRoleChanges: z.boolean(),\n  staffOnlyGenderChanges: z.boolean(),\n  isPrivate: z.boolean(),\n})\n\nexport function getAgeGroupScale(ageGroup: AgeGroup): number {\n  switch (ageGroup) {\n    case \"1-4\":\n      return 0.6\n    case \"4-7\":\n      return 0.75\n    case \"7-9\":\n      return 0.85\n    case \"12+\":\n      return 1.0\n  }\n}\n\nexport function canUsePottyAlone(ageGroup: AgeGroup): boolean {\n  return ageGroup === \"7-9\" || ageGroup === \"12+\"\n}\n\nexport function canUseBathroomAlone(ageGroup: AgeGroup): boolean {\n  return ageGroup === \"12+\"\n}\n\nexport function needsEscort(ageGroup: AgeGroup): boolean {\n  return ageGroup === \"1-4\" || ageGroup === \"4-7\"\n}\n\nexport function getAlignmentColor(alignment: Alignment): string {\n  switch (alignment) {\n    case \"little_angel\":\n      return \"#FFD700\"\n    case \"good_boy_girl\":\n      return \"#90EE90\"\n    case \"boy_girl\":\n      return \"#87CEEB\"\n    case \"bad_boy_girl\":\n      return \"#FFA500\"\n    case \"little_shit\":\n      return \"#FF6347\"\n  }\n}\n\nexport function calculateAlignmentChange(currentAlignment: Alignment, change: number): Alignment {\n  // This would need more sophisticated logic in a real implementation\n  const alignmentOrder: Alignment[] = [\"little_shit\", \"bad_boy_girl\", \"boy_girl\", \"good_boy_girl\", \"little_angel\"]\n\n  const currentIndex = alignmentOrder.indexOf(currentAlignment)\n  const newIndex = Math.max(0, Math.min(alignmentOrder.length - 1, currentIndex + change))\n\n  return alignmentOrder[newIndex]\n}\n\n// Voice Service Configuration for AI Caregivers\nexport const VOICE_SERVICE_CONFIG = {\n  // Default voice settings for AI caregivers\n  CAREGIVER_VOICE: {\n    stability: 0.7,\n    similarityBoost: 0.8,\n    style: 0.3,\n    useSpeakerBoost: true,\n  },\n\n  // Audio processing settings\n  AUDIO_SETTINGS: {\n    sampleRate: 44100,\n    channels: 1,\n    bitDepth: 16,\n    chunkDuration: 1000, // 1 second\n  },\n\n  // Recognition settings (for player speech recognition)\n  RECOGNITION_SETTINGS: {\n    language: \"en\",\n    model: \"eleven_multilingual_v2\",\n    confidence: 0.8,\n  },\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAyaO,MAAM,sBAAsB,0KAAC,CAAC,MAAM,CAAC;IAC1C,MAAM,0KAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAC5B,YAAY,0KAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAClC,sBAAsB,0KAAC,CAAC,OAAO;IAC/B,wBAAwB,0KAAC,CAAC,OAAO;IACjC,WAAW,0KAAC,CAAC,OAAO;AACtB;AAEO,SAAS,iBAAiB,QAAkB;IACjD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF;AAEO,SAAS,iBAAiB,QAAkB;IACjD,OAAO,aAAa,SAAS,aAAa;AAC5C;AAEO,SAAS,oBAAoB,QAAkB;IACpD,OAAO,aAAa;AACtB;AAEO,SAAS,YAAY,QAAkB;IAC5C,OAAO,aAAa,SAAS,aAAa;AAC5C;AAEO,SAAS,kBAAkB,SAAoB;IACpD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF;AAEO,SAAS,yBAAyB,gBAA2B,EAAE,MAAc;IAClF,oEAAoE;IACpE,MAAM,iBAA8B;QAAC;QAAe;QAAgB;QAAY;QAAiB;KAAe;IAEhH,MAAM,eAAe,eAAe,OAAO,CAAC;IAC5C,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,eAAe,MAAM,GAAG,GAAG,eAAe;IAEhF,OAAO,cAAc,CAAC,SAAS;AACjC;AAGO,MAAM,uBAAuB;IAClC,2CAA2C;IAC3C,iBAAiB;QACf,WAAW;QACX,iBAAiB;QACjB,OAAO;QACP,iBAAiB;IACnB;IAEA,4BAA4B;IAC5B,gBAAgB;QACd,YAAY;QACZ,UAAU;QACV,UAAU;QACV,eAAe;IACjB;IAEA,uDAAuD;IACvD,sBAAsB;QACpB,UAAU;QACV,OAAO;QACP,YAAY;IACd;AACF"}},
    {"offset": {"line": 3687, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/HUD.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { Card } from \"@/components/ui/card\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { usePlayerActions } from \"@/lib/hooks/usePlayerActions\"\nimport { getAlignmentColor } from \"@/lib/types/gameTypes\"\n\nexport function HUD() {\n  const { currentPlayer } = usePlayerActions()\n  const messagesArray = useGameStore((state) => state.messages)\n  const messages = useMemo(() => messagesArray.slice(-5), [messagesArray])\n\n  if (!currentPlayer) return null\n\n  return (\n    <div className=\"fixed inset-0 pointer-events-none\">\n      {/* Top left - Player stats */}\n      <Card className=\"absolute top-4 left-4 p-4 pointer-events-auto bg-card/90 backdrop-blur-sm\">\n        <div className=\"flex flex-col gap-2 min-w-[200px]\">\n          <h3 className=\"font-semibold text-foreground\">{currentPlayer.name}</h3>\n\n          {/* Alignment indicator */}\n          <div\n            className=\"px-2 py-1 rounded-md text-xs font-medium text-center\"\n            style={{ backgroundColor: getAlignmentColor(currentPlayer.alignment) }}\n          >\n            {currentPlayer.alignment.replace(/_/g, \" \").toUpperCase()}\n          </div>\n\n          {/* Needs */}\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex justify-between text-xs\">\n              <span>Bladder</span>\n              <span>{Math.round(currentPlayer.needs.bladder)}%</span>\n            </div>\n            <Progress value={currentPlayer.needs.bladder} className=\"h-2\" />\n\n            <div className=\"flex justify-between text-xs\">\n              <span>Bowel</span>\n              <span>{Math.round(currentPlayer.needs.bowel)}%</span>\n            </div>\n            <Progress value={currentPlayer.needs.bowel} className=\"h-2\" />\n\n            <div className=\"flex justify-between text-xs\">\n              <span>Hunger</span>\n              <span>{Math.round(currentPlayer.needs.hunger)}%</span>\n            </div>\n            <Progress value={currentPlayer.needs.hunger} className=\"h-2\" />\n          </div>\n\n          {/* Clothing status */}\n          <div className=\"text-xs text-muted-foreground\">\n            <div>Underwear: {currentPlayer.clothing.underwearType}</div>\n            <div>State: {currentPlayer.clothing.underwearState}</div>\n            {currentPlayer.clothing.underwearType === \"diaper\" && (\n              <div>Fill: {currentPlayer.clothing.diaperFillLevel}/5</div>\n            )}\n          </div>\n        </div>\n      </Card>\n\n      {/* Bottom center - Chat messages */}\n      <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 w-[500px] pointer-events-auto\">\n        <div className=\"flex flex-col gap-1\">\n          {messages.map((msg) => (\n            <div key={msg.id} className=\"bg-card/90 backdrop-blur-sm rounded-lg px-3 py-2 text-sm\">\n              <span className=\"font-semibold text-primary\">{msg.senderName}: </span>\n              <span className=\"text-foreground\">{msg.content}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Bottom right - Controls hint */}\n      <Card className=\"absolute bottom-4 right-4 p-3 pointer-events-auto bg-card/90 backdrop-blur-sm\">\n        <div className=\"text-xs text-muted-foreground\">\n          <div className=\"font-semibold mb-1\">Controls</div>\n          <div>WASD / Arrows - Move</div>\n          <div>Shift - Run</div>\n          <div>Space - Jump</div>\n        </div>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASO,SAAS;;IACd,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,uJAAgB;IAC1C,MAAM,gBAAgB,IAAA,6IAAY;2CAAC,CAAC,QAAU,MAAM,QAAQ;;IAC5D,MAAM,WAAW,IAAA,wKAAO;iCAAC,IAAM,cAAc,KAAK,CAAC,CAAC;gCAAI;QAAC;KAAc;IAEvE,IAAI,CAAC,eAAe,OAAO;IAE3B,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,oIAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAiC,cAAc,IAAI;;;;;;sCAGjE,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,iBAAiB,IAAA,iJAAiB,EAAC,cAAc,SAAS;4BAAE;sCAEpE,cAAc,SAAS,CAAC,OAAO,CAAC,MAAM,KAAK,WAAW;;;;;;sCAIzD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;sDAAK;;;;;;sDACN,6LAAC;;gDAAM,KAAK,KAAK,CAAC,cAAc,KAAK,CAAC,OAAO;gDAAE;;;;;;;;;;;;;8CAEjD,6LAAC,4IAAQ;oCAAC,OAAO,cAAc,KAAK,CAAC,OAAO;oCAAE,WAAU;;;;;;8CAExD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;sDAAK;;;;;;sDACN,6LAAC;;gDAAM,KAAK,KAAK,CAAC,cAAc,KAAK,CAAC,KAAK;gDAAE;;;;;;;;;;;;;8CAE/C,6LAAC,4IAAQ;oCAAC,OAAO,cAAc,KAAK,CAAC,KAAK;oCAAE,WAAU;;;;;;8CAEtD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;sDAAK;;;;;;sDACN,6LAAC;;gDAAM,KAAK,KAAK,CAAC,cAAc,KAAK,CAAC,MAAM;gDAAE;;;;;;;;;;;;;8CAEhD,6LAAC,4IAAQ;oCAAC,OAAO,cAAc,KAAK,CAAC,MAAM;oCAAE,WAAU;;;;;;;;;;;;sCAIzD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;;wCAAI;wCAAY,cAAc,QAAQ,CAAC,aAAa;;;;;;;8CACrD,6LAAC;;wCAAI;wCAAQ,cAAc,QAAQ,CAAC,cAAc;;;;;;;gCACjD,cAAc,QAAQ,CAAC,aAAa,KAAK,0BACxC,6LAAC;;wCAAI;wCAAO,cAAc,QAAQ,CAAC,eAAe;wCAAC;;;;;;;;;;;;;;;;;;;;;;;;0BAO3D,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC,oBACb,6LAAC;4BAAiB,WAAU;;8CAC1B,6LAAC;oCAAK,WAAU;;wCAA8B,IAAI,UAAU;wCAAC;;;;;;;8CAC7D,6LAAC;oCAAK,WAAU;8CAAmB,IAAI,OAAO;;;;;;;2BAFtC,IAAI,EAAE;;;;;;;;;;;;;;;0BAStB,6LAAC,oIAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAqB;;;;;;sCACpC,6LAAC;sCAAI;;;;;;sCACL,6LAAC;sCAAI;;;;;;sCACL,6LAAC;sCAAI;;;;;;;;;;;;;;;;;;;;;;;AAKf;GA7EgB;;QACY,uJAAgB;QACpB,6IAAY;;;KAFpB"}},
    {"offset": {"line": 4018, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 4083, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/stores/voiceStore.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport type { VoiceProfile } from \"@/lib/types/gameTypes\"\n\ninterface VoiceState {\n  // Voice connection\n  isConnected: boolean\n  isRecording: boolean\n  audioLevel: number\n\n  // Voice profile\n  currentVoiceProfile: VoiceProfile | null\n  availableVoices: VoiceProfile[]\n\n  // Caregiver voices\n  caregiverVoices: Map<string, string> // caregiverId -> voiceId\n\n  // Transcription\n  lastTranscript: string | null\n  transcriptConfidence: number\n\n  // Actions\n  setConnected: (connected: boolean) => void\n  setRecording: (recording: boolean) => void\n  setAudioLevel: (level: number) => void\n  setVoiceProfile: (profile: VoiceProfile | null) => void\n  setAvailableVoices: (voices: VoiceProfile[]) => void\n  setCaregiverVoice: (caregiverId: string, voiceId: string) => void\n  setLastTranscript: (transcript: string, confidence: number) => void\n}\n\nexport const useVoiceStore = create<VoiceState>((set) => ({\n  isConnected: false,\n  isRecording: false,\n  audioLevel: 0,\n  currentVoiceProfile: null,\n  availableVoices: [],\n  caregiverVoices: new Map(),\n  lastTranscript: null,\n  transcriptConfidence: 0,\n\n  setConnected: (connected) => set({ isConnected: connected }),\n  setRecording: (recording) => set({ isRecording: recording }),\n  setAudioLevel: (level) => set({ audioLevel: level }),\n  setVoiceProfile: (profile) => set({ currentVoiceProfile: profile }),\n  setAvailableVoices: (voices) => set({ availableVoices: voices }),\n\n  setCaregiverVoice: (caregiverId, voiceId) =>\n    set((state) => {\n      const caregiverVoices = new Map(state.caregiverVoices)\n      caregiverVoices.set(caregiverId, voiceId)\n      return { caregiverVoices }\n    }),\n\n  setLastTranscript: (transcript, confidence) =>\n    set({\n      lastTranscript: transcript,\n      transcriptConfidence: confidence,\n    }),\n}))\n"],"names":[],"mappings":";;;;AAAA;;AA8BO,MAAM,gBAAgB,IAAA,qJAAM,EAAa,CAAC,MAAQ,CAAC;QACxD,aAAa;QACb,aAAa;QACb,YAAY;QACZ,qBAAqB;QACrB,iBAAiB,EAAE;QACnB,iBAAiB,IAAI;QACrB,gBAAgB;QAChB,sBAAsB;QAEtB,cAAc,CAAC,YAAc,IAAI;gBAAE,aAAa;YAAU;QAC1D,cAAc,CAAC,YAAc,IAAI;gBAAE,aAAa;YAAU;QAC1D,eAAe,CAAC,QAAU,IAAI;gBAAE,YAAY;YAAM;QAClD,iBAAiB,CAAC,UAAY,IAAI;gBAAE,qBAAqB;YAAQ;QACjE,oBAAoB,CAAC,SAAW,IAAI;gBAAE,iBAAiB;YAAO;QAE9D,mBAAmB,CAAC,aAAa,UAC/B,IAAI,CAAC;gBACH,MAAM,kBAAkB,IAAI,IAAI,MAAM,eAAe;gBACrD,gBAAgB,GAAG,CAAC,aAAa;gBACjC,OAAO;oBAAE;gBAAgB;YAC3B;QAEF,mBAAmB,CAAC,YAAY,aAC9B,IAAI;gBACF,gBAAgB;gBAChB,sBAAsB;YACxB;IACJ,CAAC"}},
    {"offset": {"line": 4132, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/services/ElevenLabsService.ts"],"sourcesContent":["import type {\n  VoiceProfile,\n  VoiceRecognitionResult,\n  VoiceSynthesisOptions,\n  VoiceService,\n  VoiceEmotion,\n} from \"@/lib/types/gameTypes\"\n\n/**\n * ElevenLabs Service - Client-side wrapper using secure API routes\n */\nexport class ElevenLabsService implements VoiceService {\n  private voiceProfile: VoiceProfile | null = null\n  private recognitionLanguage = \"en\"\n  private synthesisLanguage = \"en\"\n  private audioLevelCallback?: (level: number) => void\n\n  constructor() {}\n\n  get isInitialized(): boolean {\n    return true // Always initialized since we use server routes\n  }\n\n  async recognizeSpeech(audioData: ArrayBuffer): Promise<VoiceRecognitionResult> {\n    try {\n      const formData = new FormData()\n      formData.append(\"audio\", new Blob([audioData], { type: \"audio/wav\" }))\n\n      const response = await fetch(\"/api/voice/transcribe\", {\n        method: \"POST\",\n        body: formData,\n      })\n\n      if (!response.ok) {\n        throw new Error(`Transcription error: ${response.status}`)\n      }\n\n      const result = await response.json()\n\n      return {\n        text: result.text || \"\",\n        confidence: result.confidence || 0.9,\n        language: result.language || this.recognitionLanguage,\n        duration: result.duration || 0,\n      }\n    } catch (error) {\n      console.error(\"Speech recognition failed:\", error)\n      throw new Error(`Speech recognition failed: ${error}`)\n    }\n  }\n\n  async startContinuousRecognition(): Promise<void> {\n    console.log(\"Starting continuous recognition\")\n  }\n\n  async stopContinuousRecognition(): Promise<string> {\n    console.log(\"Stopping continuous recognition\")\n    return \"\"\n  }\n\n  async synthesizeSpeech(text: string, options: VoiceSynthesisOptions): Promise<ArrayBuffer> {\n    try {\n      const { voiceId, stability = 0.7, similarityBoost = 0.8, style = 0.3 } = options\n\n      const response = await fetch(\"/api/voice/synthesize\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          text,\n          voiceId,\n          stability,\n          similarityBoost,\n          style,\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(`Speech synthesis error: ${response.status}`)\n      }\n\n      return await response.arrayBuffer()\n    } catch (error) {\n      console.error(\"Speech synthesis failed:\", error)\n      throw new Error(`Speech synthesis failed: ${error}`)\n    }\n  }\n\n  async getAvailableVoices(): Promise<VoiceProfile[]> {\n    try {\n      const response = await fetch(\"/api/voice/voices\")\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch voices: ${response.status}`)\n      }\n\n      return await response.json()\n    } catch (error) {\n      console.error(\"Failed to fetch available voices:\", error)\n      return []\n    }\n  }\n\n  async createVoiceProfile(voiceId: string): Promise<VoiceProfile> {\n    const voices = await this.getAvailableVoices()\n    const voice = voices.find((v) => v.voiceId === voiceId)\n\n    if (!voice) {\n      throw new Error(`Voice not found: ${voiceId}`)\n    }\n\n    return voice\n  }\n\n  async processAudioInput(stream: MediaStream): Promise<void> {\n    console.log(\"Processing audio input\")\n  }\n\n  setAudioLevelCallback(callback: (level: number) => void): void {\n    this.audioLevelCallback = callback\n  }\n\n  setRecognitionLanguage(language: string): void {\n    this.recognitionLanguage = language\n  }\n\n  setSynthesisLanguage(language: string): void {\n    this.synthesisLanguage = language\n  }\n\n  setVoiceProfile(profile: VoiceProfile): void {\n    this.voiceProfile = profile\n  }\n\n  getVoiceSettingsForEmotion(emotion: VoiceEmotion): Partial<VoiceSynthesisOptions> {\n    switch (emotion) {\n      case \"caring\":\n        return {\n          stability: 0.75,\n          similarityBoost: 0.85,\n          style: 0.25,\n          useSpeakerBoost: true,\n        }\n\n      case \"firm\":\n        return {\n          stability: 0.8,\n          similarityBoost: 0.7,\n          style: 0.6,\n          useSpeakerBoost: true,\n        }\n\n      case \"stern\":\n        return {\n          stability: 0.9,\n          similarityBoost: 0.6,\n          style: 0.8,\n          useSpeakerBoost: true,\n        }\n\n      case \"playful\":\n        return {\n          stability: 0.6,\n          similarityBoost: 0.8,\n          style: 0.2,\n          useSpeakerBoost: false,\n        }\n\n      case \"neutral\":\n      default:\n        return {\n          stability: 0.7,\n          similarityBoost: 0.8,\n          style: 0.4,\n          useSpeakerBoost: true,\n        }\n    }\n  }\n\n  async synthesizeCaregiverSpeech(\n    voiceId: string,\n    text: string,\n    emotion: VoiceEmotion = \"caring\",\n  ): Promise<ArrayBuffer> {\n    const voiceSettings = this.getVoiceSettingsForEmotion(emotion)\n\n    return this.synthesizeSpeech(text, {\n      voiceId,\n      ...voiceSettings,\n    })\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4295, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/VoiceControls.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback, useRef } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { Mic, MicOff, Volume2, VolumeX } from \"lucide-react\"\nimport { useVoiceStore } from \"@/lib/stores/voiceStore\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { ElevenLabsService } from \"@/lib/services/ElevenLabsService\"\nimport { nanoid } from \"nanoid\"\n\nexport function VoiceControls() {\n  const [isRecording, setIsRecording] = useState(false)\n  const [isMuted, setIsMuted] = useState(false)\n  const [voiceService] = useState(() => new ElevenLabsService())\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null)\n  const audioChunksRef = useRef<Blob[]>([])\n\n  const { setRecording, setAudioLevel, setLastTranscript } = useVoiceStore()\n  const addMessage = useGameStore((state) => state.addMessage)\n  const currentPlayerId = useGameStore((state) => state.currentPlayerId)\n\n  const startRecording = useCallback(async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\n      const mediaRecorder = new MediaRecorder(stream)\n      mediaRecorderRef.current = mediaRecorder\n      audioChunksRef.current = []\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data)\n        }\n      }\n\n      mediaRecorder.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: \"audio/wav\" })\n        const arrayBuffer = await audioBlob.arrayBuffer()\n\n        // Transcribe audio\n        try {\n          const result = await voiceService.recognizeSpeech(arrayBuffer)\n          console.log(\"[v0] Transcription:\", result.text)\n\n          setLastTranscript(result.text, result.confidence)\n\n          // Add message to chat\n          if (currentPlayerId) {\n            addMessage({\n              id: `msg_${nanoid()}`,\n              senderId: currentPlayerId,\n              senderName: \"You\",\n              content: result.text,\n              timestamp: Date.now(),\n              isSystem: false,\n              messageType: \"chat\",\n            })\n          }\n        } catch (error) {\n          console.error(\"[v0] Transcription failed:\", error)\n        }\n\n        // Clean up\n        stream.getTracks().forEach((track) => track.stop())\n        audioChunksRef.current = []\n      }\n\n      mediaRecorder.start()\n      setIsRecording(true)\n      setRecording(true)\n\n      // Audio level monitoring\n      if (typeof window !== \"undefined\" && \"AudioContext\" in window) {\n        const audioContext = new AudioContext()\n        const source = audioContext.createMediaStreamSource(stream)\n        const analyser = audioContext.createAnalyser()\n        analyser.fftSize = 256\n        source.connect(analyser)\n\n        const dataArray = new Uint8Array(analyser.frequencyBinCount)\n        const updateLevel = () => {\n          if (mediaRecorderRef.current?.state === \"recording\") {\n            analyser.getByteFrequencyData(dataArray)\n            const average = dataArray.reduce((a, b) => a + b) / dataArray.length\n            setAudioLevel(average / 255)\n            requestAnimationFrame(updateLevel)\n          }\n        }\n        updateLevel()\n      }\n    } catch (error) {\n      console.error(\"[v0] Failed to start recording:\", error)\n    }\n  }, [voiceService, setRecording, setAudioLevel, setLastTranscript, addMessage, currentPlayerId])\n\n  const stopRecording = useCallback(() => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === \"recording\") {\n      mediaRecorderRef.current.stop()\n      setIsRecording(false)\n      setRecording(false)\n      setAudioLevel(0)\n    }\n  }, [setRecording, setAudioLevel])\n\n  const toggleMute = useCallback(() => {\n    setIsMuted(!isMuted)\n  }, [isMuted])\n\n  return (\n    <Card className=\"absolute top-4 right-4 p-3 pointer-events-auto bg-card/90 backdrop-blur-sm\">\n      <div className=\"flex items-center gap-2\">\n        <Button\n          variant={isRecording ? \"destructive\" : \"default\"}\n          size=\"icon\"\n          onMouseDown={startRecording}\n          onMouseUp={stopRecording}\n          onTouchStart={startRecording}\n          onTouchEnd={stopRecording}\n        >\n          {isRecording ? <Mic className=\"h-4 w-4 animate-pulse\" /> : <MicOff className=\"h-4 w-4\" />}\n        </Button>\n\n        <Button variant=\"outline\" size=\"icon\" onClick={toggleMute}>\n          {isMuted ? <VolumeX className=\"h-4 w-4\" /> : <Volume2 className=\"h-4 w-4\" />}\n        </Button>\n\n        <div className=\"flex flex-col gap-1 min-w-[100px]\">\n          <div className=\"text-xs font-medium\">{isRecording ? \"Recording...\" : \"Hold to talk\"}</div>\n          {isRecording && (\n            <div className=\"h-1 bg-secondary rounded-full overflow-hidden\">\n              <div className=\"h-full bg-primary animate-pulse\" style={{ width: \"100%\" }} />\n            </div>\n          )}\n        </div>\n      </div>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4559, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/VoiceVisualizer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { useVoiceStore } from \"@/lib/stores/voiceStore\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\n\nexport function VoiceVisualizer() {\n  const audioLevel = useVoiceStore((state) => state.audioLevel)\n  const playersMap = useGameStore((state) => state.players)\n  const caregiversMap = useGameStore((state) => state.caregivers)\n\n  const players = useMemo(() => Array.from(playersMap.values()), [playersMap])\n  const caregivers = useMemo(() => Array.from(caregiversMap.values()), [caregiversMap])\n\n  const activeSpeakers = useMemo(\n    () =>\n      [...players, ...caregivers].filter(\n        (entity) => entity.lastVoiceActivity && Date.now() - entity.lastVoiceActivity < 2000,\n      ),\n    [players, caregivers],\n  )\n\n  if (activeSpeakers.length === 0 && audioLevel === 0) return null\n\n  return (\n    <div className=\"fixed top-20 right-4 pointer-events-none\">\n      <div className=\"flex flex-col gap-2\">\n        {activeSpeakers.map((speaker) => (\n          <div\n            key={speaker.id}\n            className=\"bg-primary/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2 animate-pulse\"\n          >\n            <div className=\"w-2 h-2 bg-primary rounded-full\" />\n            <span className=\"text-sm font-medium text-foreground\">{speaker.name} is speaking</span>\n          </div>\n        ))}\n\n        {audioLevel > 0 && (\n          <div className=\"bg-secondary/20 backdrop-blur-sm rounded-lg px-3 py-2\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex gap-1\">\n                {Array.from({ length: 5 }).map((_, i) => (\n                  <div\n                    key={i}\n                    className=\"w-1 bg-primary rounded-full transition-all\"\n                    style={{\n                      height: audioLevel * 100 > i * 20 ? `${(i + 1) * 4}px` : \"4px\",\n                    }}\n                  />\n                ))}\n              </div>\n              <span className=\"text-xs text-muted-foreground\">Your mic</span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,aAAa,IAAA,+IAAa;qDAAC,CAAC,QAAU,MAAM,UAAU;;IAC5D,MAAM,aAAa,IAAA,6IAAY;oDAAC,CAAC,QAAU,MAAM,OAAO;;IACxD,MAAM,gBAAgB,IAAA,6IAAY;uDAAC,CAAC,QAAU,MAAM,UAAU;;IAE9D,MAAM,UAAU,IAAA,wKAAO;4CAAC,IAAM,MAAM,IAAI,CAAC,WAAW,MAAM;2CAAK;QAAC;KAAW;IAC3E,MAAM,aAAa,IAAA,wKAAO;+CAAC,IAAM,MAAM,IAAI,CAAC,cAAc,MAAM;8CAAK;QAAC;KAAc;IAEpF,MAAM,iBAAiB,IAAA,wKAAO;mDAC5B,IACE;mBAAI;mBAAY;aAAW,CAAC,MAAM;2DAChC,CAAC,SAAW,OAAO,iBAAiB,IAAI,KAAK,GAAG,KAAK,OAAO,iBAAiB,GAAG;;kDAEpF;QAAC;QAAS;KAAW;IAGvB,IAAI,eAAe,MAAM,KAAK,KAAK,eAAe,GAAG,OAAO;IAE5D,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;gBACZ,eAAe,GAAG,CAAC,CAAC,wBACnB,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;;oCAAuC,QAAQ,IAAI;oCAAC;;;;;;;;uBAJ/D,QAAQ,EAAE;;;;;gBAQlB,aAAa,mBACZ,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,MAAM,IAAI,CAAC;oCAAE,QAAQ;gCAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,6LAAC;wCAEC,WAAU;wCACV,OAAO;4CACL,QAAQ,aAAa,MAAM,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG;wCAC3D;uCAJK;;;;;;;;;;0CAQX,6LAAC;gCAAK,WAAU;0CAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9D;GApDgB;;QACK,+IAAa;QACb,6IAAY;QACT,6IAAY;;;KAHpB"}},
    {"offset": {"line": 4710, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/TranscriptDisplay.tsx"],"sourcesContent":["\"use client\"\n\nimport { useVoiceStore } from \"@/lib/stores/voiceStore\"\nimport { Card } from \"@/components/ui/card\"\n\nexport function TranscriptDisplay() {\n  const lastTranscript = useVoiceStore((state) => state.lastTranscript)\n  const transcriptConfidence = useVoiceStore((state) => state.transcriptConfidence)\n\n  if (!lastTranscript) return null\n\n  return (\n    <Card className=\"fixed bottom-32 left-1/2 -translate-x-1/2 p-3 max-w-[500px] pointer-events-auto bg-card/90 backdrop-blur-sm\">\n      <div className=\"flex flex-col gap-1\">\n        <div className=\"text-xs text-muted-foreground flex justify-between\">\n          <span>You said:</span>\n          <span>Confidence: {Math.round(transcriptConfidence * 100)}%</span>\n        </div>\n        <div className=\"text-sm text-foreground\">{lastTranscript}</div>\n      </div>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,iBAAiB,IAAA,+IAAa;2DAAC,CAAC,QAAU,MAAM,cAAc;;IACpE,MAAM,uBAAuB,IAAA,+IAAa;iEAAC,CAAC,QAAU,MAAM,oBAAoB;;IAEhF,IAAI,CAAC,gBAAgB,OAAO;IAE5B,qBACE,6LAAC,oIAAI;QAAC,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAK;;;;;;sCACN,6LAAC;;gCAAK;gCAAa,KAAK,KAAK,CAAC,uBAAuB;gCAAK;;;;;;;;;;;;;8BAE5D,6LAAC;oBAAI,WAAU;8BAA2B;;;;;;;;;;;;;;;;;AAIlD;GAjBgB;;QACS,+IAAa;QACP,+IAAa;;;KAF5B"}},
    {"offset": {"line": 4799, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 5005, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/utils/paywall.ts"],"sourcesContent":["/**\n * Paywall utilities for daycare creation\n */\n\nexport interface PaywallOptions {\n  price: number\n  adDuration: number // in seconds\n  trialDays: number\n}\n\nexport const DAYCARE_PAYWALL: PaywallOptions = {\n  price: 9.99,\n  adDuration: 30, // 30 second ad\n  trialDays: 7,\n}\n\nexport async function processPayment(userId: string): Promise<boolean> {\n  // Integration with payment processor (Stripe, etc.)\n  try {\n    // Placeholder for actual payment processing\n    console.log(\"[v0] Processing payment for user:\", userId)\n    return true\n  } catch (error) {\n    console.error(\"[v0] Payment processing failed:\", error)\n    return false\n  }\n}\n\nexport async function watchAdvertisement(): Promise<boolean> {\n  // Integration with ad network\n  try {\n    console.log(\"[v0] Loading advertisement...\")\n    // Placeholder - would integrate with Google AdMob, Unity Ads, etc.\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        console.log(\"[v0] Advertisement completed\")\n        resolve(true)\n      }, DAYCARE_PAYWALL.adDuration * 1000)\n    })\n  } catch (error) {\n    console.error(\"[v0] Advertisement failed:\", error)\n    return false\n  }\n}\n\nexport function hasValidDaycareAccess(createdAt: number, trialEndDate?: number, isPaid = false): boolean {\n  if (isPaid) return true\n\n  if (trialEndDate) {\n    return Date.now() < trialEndDate\n  }\n\n  const trialEnd = createdAt + DAYCARE_PAYWALL.trialDays * 24 * 60 * 60 * 1000\n  return Date.now() < trialEnd\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAQM,MAAM,kBAAkC;IAC7C,OAAO;IACP,YAAY;IACZ,WAAW;AACb;AAEO,eAAe,eAAe,MAAc;IACjD,oDAAoD;IACpD,IAAI;QACF,4CAA4C;QAC5C,QAAQ,GAAG,CAAC,qCAAqC;QACjD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;AAEO,eAAe;IACpB,8BAA8B;IAC9B,IAAI;QACF,QAAQ,GAAG,CAAC;QACZ,mEAAmE;QACnE,OAAO,IAAI,QAAQ,CAAC;YAClB,WAAW;gBACT,QAAQ,GAAG,CAAC;gBACZ,QAAQ;YACV,GAAG,gBAAgB,UAAU,GAAG;QAClC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;IACT;AACF;AAEO,SAAS,sBAAsB,SAAiB,EAAE,YAAqB,EAAE,SAAS,KAAK;IAC5F,IAAI,QAAQ,OAAO;IAEnB,IAAI,cAAc;QAChB,OAAO,KAAK,GAAG,KAAK;IACtB;IAEA,MAAM,WAAW,YAAY,gBAAgB,SAAS,GAAG,KAAK,KAAK,KAAK;IACxE,OAAO,KAAK,GAAG,KAAK;AACtB"}},
    {"offset": {"line": 5064, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/PaywallDialog.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { Loader2, Play, DollarSign } from \"lucide-react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { DAYCARE_PAYWALL, processPayment, watchAdvertisement } from \"@/lib/utils/paywall\"\n\nexport function PaywallDialog() {\n  const showPaywall = useGameStore((state) => state.showPaywall)\n  const setShowPaywall = useGameStore((state) => state.setShowPaywall)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [paymentMethod, setPaymentMethod] = useState<\"payment\" | \"ad\" | null>(null)\n\n  const handlePayment = async () => {\n    setIsProcessing(true)\n    setPaymentMethod(\"payment\")\n\n    try {\n      const success = await processPayment(\"user_demo\")\n\n      if (success) {\n        setShowPaywall(false)\n        // Would grant access to daycare creation\n        console.log(\"[v0] Payment successful - daycare access granted\")\n      } else {\n        console.error(\"[v0] Payment failed\")\n      }\n    } catch (error) {\n      console.error(\"[v0] Payment error:\", error)\n    } finally {\n      setIsProcessing(false)\n      setPaymentMethod(null)\n    }\n  }\n\n  const handleWatchAd = async () => {\n    setIsProcessing(true)\n    setPaymentMethod(\"ad\")\n\n    try {\n      const success = await watchAdvertisement()\n\n      if (success) {\n        setShowPaywall(false)\n        // Would grant access to daycare creation\n        console.log(\"[v0] Ad completed - daycare access granted\")\n      } else {\n        console.error(\"[v0] Ad failed or was skipped\")\n      }\n    } catch (error) {\n      console.error(\"[v0] Ad error:\", error)\n    } finally {\n      setIsProcessing(false)\n      setPaymentMethod(null)\n    }\n  }\n\n  return (\n    <Dialog open={showPaywall} onOpenChange={setShowPaywall}>\n      <DialogContent className=\"sm:max-w-[500px] bg-background\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold text-foreground\">Create Your Daycare</DialogTitle>\n          <DialogDescription className=\"text-muted-foreground\">\n            Choose how you'd like to unlock daycare creation and start welcoming little ones\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex flex-col gap-4 mt-4\">\n          {/* Payment Option */}\n          <Card className=\"p-6 border-2 border-primary/20 hover:border-primary/40 transition-colors\">\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex flex-col gap-1\">\n                  <h3 className=\"text-lg font-semibold text-foreground flex items-center gap-2\">\n                    <DollarSign className=\"h-5 w-5 text-primary\" />\n                    One-Time Payment\n                  </h3>\n                  <p className=\"text-sm text-muted-foreground\">Instant access, no ads</p>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-2xl font-bold text-primary\">${DAYCARE_PAYWALL.price}</div>\n                  <div className=\"text-xs text-muted-foreground\">One-time fee</div>\n                </div>\n              </div>\n\n              <ul className=\"flex flex-col gap-2 text-sm text-muted-foreground\">\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                  <span>Lifetime access to daycare creation</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                  <span>No advertisements</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                  <span>Support development</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                  <span>Priority customer support</span>\n                </li>\n              </ul>\n\n              <Button onClick={handlePayment} disabled={isProcessing} className=\"w-full bg-primary hover:bg-primary/90\">\n                {isProcessing && paymentMethod === \"payment\" ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Processing...\n                  </>\n                ) : (\n                  \"Purchase Now\"\n                )}\n              </Button>\n            </div>\n          </Card>\n\n          {/* Ad Option */}\n          <Card className=\"p-6 border-2 border-secondary/20 hover:border-secondary/40 transition-colors\">\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex flex-col gap-1\">\n                  <h3 className=\"text-lg font-semibold text-foreground flex items-center gap-2\">\n                    <Play className=\"h-5 w-5 text-secondary\" />\n                    Watch Advertisement\n                  </h3>\n                  <p className=\"text-sm text-muted-foreground\">Free access after watching</p>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-2xl font-bold text-secondary\">FREE</div>\n                  <div className=\"text-xs text-muted-foreground\">{DAYCARE_PAYWALL.adDuration}s ad</div>\n                </div>\n              </div>\n\n              <ul className=\"flex flex-col gap-2 text-sm text-muted-foreground\">\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-secondary\" />\n                  <span>Watch a {DAYCARE_PAYWALL.adDuration}-second advertisement</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-secondary\" />\n                  <span>Get {DAYCARE_PAYWALL.trialDays}-day trial access</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-secondary\" />\n                  <span>No payment required</span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-secondary\" />\n                  <span>Can upgrade to premium anytime</span>\n                </li>\n              </ul>\n\n              <Button onClick={handleWatchAd} disabled={isProcessing} variant=\"secondary\" className=\"w-full\">\n                {isProcessing && paymentMethod === \"ad\" ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Loading Ad...\n                  </>\n                ) : (\n                  \"Watch Ad & Start Trial\"\n                )}\n              </Button>\n            </div>\n          </Card>\n\n          <div className=\"text-center text-xs text-muted-foreground\">\n            <p>\n              By proceeding, you agree to our Terms of Service and Privacy Policy.\n              <br />\n              Payment processed securely through Stripe.\n            </p>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5652, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/TrialBanner.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Clock, Sparkles } from \"lucide-react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { hasValidDaycareAccess } from \"@/lib/utils/paywall\"\n\nexport function TrialBanner() {\n  const currentLobby = useGameStore((state) => state.currentLobby)\n  const setShowPaywall = useGameStore((state) => state.setShowPaywall)\n  const [daysRemaining, setDaysRemaining] = useState(0)\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    if (!currentLobby || !currentLobby.trialEndDate) {\n      setIsVisible(false)\n      return\n    }\n\n    const hasAccess = hasValidDaycareAccess(currentLobby.createdAt, currentLobby.trialEndDate, false)\n    const remaining = Math.ceil((currentLobby.trialEndDate - Date.now()) / (1000 * 60 * 60 * 24))\n\n    setDaysRemaining(remaining)\n    setIsVisible(hasAccess && remaining <= 3) // Show when 3 or fewer days remain\n  }, [currentLobby])\n\n  if (!isVisible || daysRemaining <= 0) return null\n\n  return (\n    <Card className=\"fixed top-20 left-1/2 -translate-x-1/2 p-4 pointer-events-auto bg-accent/90 backdrop-blur-sm border-2 border-primary/30 max-w-[400px]\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"p-2 bg-primary/20 rounded-full\">\n          <Clock className=\"h-5 w-5 text-primary\" />\n        </div>\n\n        <div className=\"flex-1\">\n          <h4 className=\"font-semibold text-foreground flex items-center gap-1\">\n            Trial Ending Soon\n            {daysRemaining <= 1 && <Sparkles className=\"h-3 w-3 text-primary animate-pulse\" />}\n          </h4>\n          <p className=\"text-sm text-muted-foreground\">\n            {daysRemaining === 1 ? \"1 day\" : `${daysRemaining} days`} left in your free trial\n          </p>\n        </div>\n\n        <Button size=\"sm\" onClick={() => setShowPaywall(true)} className=\"bg-primary hover:bg-primary/90\">\n          Upgrade\n        </Button>\n      </div>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AAPA;;;;;;;AASO,SAAS;;IACd,MAAM,eAAe,IAAA,6IAAY;kDAAC,CAAC,QAAU,MAAM,YAAY;;IAC/D,MAAM,iBAAiB,IAAA,6IAAY;oDAAC,CAAC,QAAU,MAAM,cAAc;;IACnE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;iCAAC;YACR,IAAI,CAAC,gBAAgB,CAAC,aAAa,YAAY,EAAE;gBAC/C,aAAa;gBACb;YACF;YAEA,MAAM,YAAY,IAAA,mJAAqB,EAAC,aAAa,SAAS,EAAE,aAAa,YAAY,EAAE;YAC3F,MAAM,YAAY,KAAK,IAAI,CAAC,CAAC,aAAa,YAAY,GAAG,KAAK,GAAG,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;YAE3F,iBAAiB;YACjB,aAAa,aAAa,aAAa,IAAG,mCAAmC;QAC/E;gCAAG;QAAC;KAAa;IAEjB,IAAI,CAAC,aAAa,iBAAiB,GAAG,OAAO;IAE7C,qBACE,6LAAC,oIAAI;QAAC,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;8BAGnB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;;gCAAwD;gCAEnE,iBAAiB,mBAAK,6LAAC,yNAAQ;oCAAC,WAAU;;;;;;;;;;;;sCAE7C,6LAAC;4BAAE,WAAU;;gCACV,kBAAkB,IAAI,UAAU,GAAG,cAAc,KAAK,CAAC;gCAAC;;;;;;;;;;;;;8BAI7D,6LAAC,wIAAM;oBAAC,MAAK;oBAAK,SAAS,IAAM,eAAe;oBAAO,WAAU;8BAAiC;;;;;;;;;;;;;;;;;AAM1G;GA5CgB;;QACO,6IAAY;QACV,6IAAY;;;KAFrB"}},
    {"offset": {"line": 5792, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/DaycareCreationButton.tsx"],"sourcesContent":["\"use client\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { PlusCircle } from \"lucide-react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { hasValidDaycareAccess } from \"@/lib/utils/paywall\"\n\nexport function DaycareCreationButton() {\n  const currentLobby = useGameStore((state) => state.currentLobby)\n  const setShowPaywall = useGameStore((state) => state.setShowPaywall)\n\n  const handleCreateDaycare = () => {\n    // Check if user has valid access\n    const hasAccess = currentLobby\n      ? hasValidDaycareAccess(currentLobby.createdAt, currentLobby.trialEndDate, false)\n      : false\n\n    if (hasAccess) {\n      // Create daycare\n      console.log(\"[v0] Creating daycare...\")\n      // Would show daycare creation modal\n    } else {\n      // Show paywall\n      setShowPaywall(true)\n    }\n  }\n\n  return (\n    <Button onClick={handleCreateDaycare} className=\"gap-2 bg-primary hover:bg-primary/90\">\n      <PlusCircle className=\"h-4 w-4\" />\n      Create Daycare\n    </Button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,eAAe,IAAA,6IAAY;4DAAC,CAAC,QAAU,MAAM,YAAY;;IAC/D,MAAM,iBAAiB,IAAA,6IAAY;8DAAC,CAAC,QAAU,MAAM,cAAc;;IAEnE,MAAM,sBAAsB;QAC1B,iCAAiC;QACjC,MAAM,YAAY,eACd,IAAA,mJAAqB,EAAC,aAAa,SAAS,EAAE,aAAa,YAAY,EAAE,SACzE;QAEJ,IAAI,WAAW;YACb,iBAAiB;YACjB,QAAQ,GAAG,CAAC;QACZ,oCAAoC;QACtC,OAAO;YACL,eAAe;YACf,eAAe;QACjB;IACF;IAEA,qBACE,6LAAC,wIAAM;QAAC,SAAS;QAAqB,WAAU;;0BAC9C,6LAAC,mOAAU;gBAAC,WAAU;;;;;;YAAY;;;;;;;AAIxC;GA1BgB;;QACO,6IAAY;QACV,6IAAY;;;KAFrB"}},
    {"offset": {"line": 5863, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/components/ui/SubscriptionStatus.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Crown, Calendar, AlertCircle } from \"lucide-react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { hasValidDaycareAccess } from \"@/lib/utils/paywall\"\n\nexport function SubscriptionStatus() {\n  const currentLobby = useGameStore((state) => state.currentLobby)\n  const setShowPaywall = useGameStore((state) => state.setShowPaywall)\n\n  if (!currentLobby) return null\n\n  const isPaid = false // Would check actual payment status\n  const hasAccess = hasValidDaycareAccess(currentLobby.createdAt, currentLobby.trialEndDate, isPaid)\n  const isExpired = currentLobby.trialEndDate && Date.now() > currentLobby.trialEndDate\n\n  if (isPaid) {\n    return (\n      <Card className=\"p-4 bg-primary/10 border-primary/30\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-primary/20 rounded-full\">\n            <Crown className=\"h-5 w-5 text-primary\" />\n          </div>\n          <div className=\"flex-1\">\n            <h4 className=\"font-semibold text-foreground\">Premium Member</h4>\n            <p className=\"text-sm text-muted-foreground\">Thank you for your support!</p>\n          </div>\n        </div>\n      </Card>\n    )\n  }\n\n  if (isExpired) {\n    return (\n      <Card className=\"p-4 bg-destructive/10 border-destructive/30\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-destructive/20 rounded-full\">\n            <AlertCircle className=\"h-5 w-5 text-destructive\" />\n          </div>\n          <div className=\"flex-1\">\n            <h4 className=\"font-semibold text-foreground\">Trial Expired</h4>\n            <p className=\"text-sm text-muted-foreground\">Upgrade to continue using daycare features</p>\n          </div>\n          <Button size=\"sm\" onClick={() => setShowPaywall(true)} className=\"bg-primary hover:bg-primary/90\">\n            Upgrade Now\n          </Button>\n        </div>\n      </Card>\n    )\n  }\n\n  if (currentLobby.trialEndDate) {\n    const daysRemaining = Math.ceil((currentLobby.trialEndDate - Date.now()) / (1000 * 60 * 60 * 24))\n\n    return (\n      <Card className=\"p-4 bg-secondary/10 border-secondary/30\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-secondary/20 rounded-full\">\n            <Calendar className=\"h-5 w-5 text-secondary\" />\n          </div>\n          <div className=\"flex-1\">\n            <h4 className=\"font-semibold text-foreground\">Free Trial Active</h4>\n            <p className=\"text-sm text-muted-foreground\">\n              {daysRemaining} {daysRemaining === 1 ? \"day\" : \"days\"} remaining\n            </p>\n          </div>\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setShowPaywall(true)}\n            className=\"border-primary text-primary hover:bg-primary/10\"\n          >\n            Upgrade\n          </Button>\n        </div>\n      </Card>\n    )\n  }\n\n  return null\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS;;IACd,MAAM,eAAe,IAAA,6IAAY;yDAAC,CAAC,QAAU,MAAM,YAAY;;IAC/D,MAAM,iBAAiB,IAAA,6IAAY;2DAAC,CAAC,QAAU,MAAM,cAAc;;IAEnE,IAAI,CAAC,cAAc,OAAO;IAE1B,MAAM,SAAS,MAAM,oCAAoC;;IACzD,MAAM,YAAY,IAAA,mJAAqB,EAAC,aAAa,SAAS,EAAE,aAAa,YAAY,EAAE;IAC3F,MAAM,YAAY,aAAa,YAAY,IAAI,KAAK,GAAG,KAAK,aAAa,YAAY;IAErF;;IAgBA,IAAI,WAAW;QACb,qBACE,6LAAC,oIAAI;YAAC,WAAU;sBACd,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,sOAAW;4BAAC,WAAU;;;;;;;;;;;kCAEzB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAgC;;;;;;0CAC9C,6LAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;kCAE/C,6LAAC,wIAAM;wBAAC,MAAK;wBAAK,SAAS,IAAM,eAAe;wBAAO,WAAU;kCAAiC;;;;;;;;;;;;;;;;;IAM1G;IAEA,IAAI,aAAa,YAAY,EAAE;QAC7B,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAC,aAAa,YAAY,GAAG,KAAK,GAAG,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;QAE/F,qBACE,6LAAC,oIAAI;YAAC,WAAU;sBACd,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,yNAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAgC;;;;;;0CAC9C,6LAAC;gCAAE,WAAU;;oCACV;oCAAc;oCAAE,kBAAkB,IAAI,QAAQ;oCAAO;;;;;;;;;;;;;kCAG1D,6LAAC,wIAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS,IAAM,eAAe;wBAC9B,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,OAAO;AACT;GA1EgB;;QACO,6IAAY;QACV,6IAAY;;;KAFrB"}},
    {"offset": {"line": 6056, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/hooks/useAICaregivers.ts"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { nanoid } from \"nanoid\"\nimport type { Caregiver } from \"@/lib/types/gameTypes\"\n\nexport function useAICaregivers() {\n  const hasInitialized = useRef(false)\n\n  useEffect(() => {\n    if (hasInitialized.current) return\n    hasInitialized.current = true\n\n    // Use setTimeout to defer spawning to next tick, avoiding render cycle\n    const timeoutId = setTimeout(() => {\n      const state = useGameStore.getState()\n      const playerCount = state.players.size\n      const caregiverCount = state.caregivers.size\n      const neededCaregivers = Math.max(1, Math.ceil(Math.max(1, playerCount) / 4))\n\n      if (caregiverCount < neededCaregivers) {\n        const toSpawn = neededCaregivers - caregiverCount\n        for (let i = 0; i < toSpawn; i++) {\n          const caregiver = createAICaregiver(caregiverCount + i)\n          useGameStore.getState().addCaregiver(caregiver)\n        }\n      }\n    }, 0)\n\n    return () => clearTimeout(timeoutId)\n  }, [])\n}\n\nfunction createAICaregiver(index: number): Caregiver {\n  const personalities = [\n    { name: \"Miss Sophie\", strictness: 60, nurturing: 70 },\n    { name: \"Mr. James\", strictness: 75, nurturing: 55 },\n    { name: \"Miss Emily\", strictness: 45, nurturing: 85 },\n    { name: \"Mr. David\", strictness: 80, nurturing: 50 },\n    { name: \"Miss Rachel\", strictness: 55, nurturing: 75 },\n  ]\n\n  const personality = personalities[index % personalities.length]\n\n  return {\n    id: `ai_caregiver_${nanoid()}`,\n    name: personality.name,\n    role: \"caregiver\",\n    gender: personality.name.startsWith(\"Miss\") ? \"female\" : \"male\",\n    adminRole: \"mod\",\n    character: {\n      skinColor: \"#F5D0C5\",\n      ageGroup: \"12+\",\n      hairColor: \"#8B4513\",\n      eyeColor: \"#4A90E2\",\n    },\n    clothing: {\n      shirt: true,\n      pants: true,\n      socks: true,\n      shoes: true,\n      underwearType: \"underwear\",\n      underwearState: \"clean\",\n      diaperFillLevel: 0,\n      pacifierIn: false,\n    },\n    needs: {\n      bladder: 0,\n      bowel: 0,\n      hunger: 0,\n    },\n    position: {\n      x: (Math.random() - 0.5) * 20,\n      y: 0,\n      z: (Math.random() - 0.5) * 20,\n    },\n    rotation: Math.random() * Math.PI * 2,\n    disciplineStatus: \"green\",\n    alignment: \"little_angel\",\n    isInTimeout: false,\n    isBeingLed: false,\n    currentAnimation: \"walk\",\n    privileges: [\"all\"],\n    rewards: [],\n    punishments: [],\n    personality: {\n      strictness: personality.strictness,\n      nurturing: personality.nurturing,\n      patience: 60 + Math.random() * 20,\n      fairness: 75 + Math.random() * 15,\n      responsiveness: 70 + Math.random() * 20,\n    },\n    perception: {\n      visibleEntities: [],\n      distances: new Map(),\n      occluded: false,\n      audioEvents: [],\n    },\n    worldState: {\n      navmesh: null,\n      hazards: [],\n      interactables: new Map(),\n    },\n    currentIntent: {\n      goals: [],\n      constraints: [],\n      cooldowns: new Map(),\n    },\n    voiceProfile: {\n      provider: \"elevenlabs\",\n      voiceId: `caregiver_voice_${index}`,\n      pitch: 1.0,\n      speed: 1.0,\n      emotion: \"caring\",\n      recognitionProvider: \"openai\",\n      synthesisProvider: \"elevenlabs\",\n    },\n    isAI: true,\n    lastDecisionTime: Date.now(),\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAOO,SAAS;;IACd,MAAM,iBAAiB,IAAA,uKAAM,EAAC;IAE9B,IAAA,0KAAS;qCAAC;YACR,IAAI,eAAe,OAAO,EAAE;YAC5B,eAAe,OAAO,GAAG;YAEzB,uEAAuE;YACvE,MAAM,YAAY;uDAAW;oBAC3B,MAAM,QAAQ,6IAAY,CAAC,QAAQ;oBACnC,MAAM,cAAc,MAAM,OAAO,CAAC,IAAI;oBACtC,MAAM,iBAAiB,MAAM,UAAU,CAAC,IAAI;oBAC5C,MAAM,mBAAmB,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,eAAe;oBAE1E,IAAI,iBAAiB,kBAAkB;wBACrC,MAAM,UAAU,mBAAmB;wBACnC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,IAAK;4BAChC,MAAM,YAAY,kBAAkB,iBAAiB;4BACrD,6IAAY,CAAC,QAAQ,GAAG,YAAY,CAAC;wBACvC;oBACF;gBACF;sDAAG;YAEH;6CAAO,IAAM,aAAa;;QAC5B;oCAAG,EAAE;AACP;GAzBgB;AA2BhB,SAAS,kBAAkB,KAAa;IACtC,MAAM,gBAAgB;QACpB;YAAE,MAAM;YAAe,YAAY;YAAI,WAAW;QAAG;QACrD;YAAE,MAAM;YAAa,YAAY;YAAI,WAAW;QAAG;QACnD;YAAE,MAAM;YAAc,YAAY;YAAI,WAAW;QAAG;QACpD;YAAE,MAAM;YAAa,YAAY;YAAI,WAAW;QAAG;QACnD;YAAE,MAAM;YAAe,YAAY;YAAI,WAAW;QAAG;KACtD;IAED,MAAM,cAAc,aAAa,CAAC,QAAQ,cAAc,MAAM,CAAC;IAE/D,OAAO;QACL,IAAI,CAAC,aAAa,EAAE,IAAA,uKAAM,KAAI;QAC9B,MAAM,YAAY,IAAI;QACtB,MAAM;QACN,QAAQ,YAAY,IAAI,CAAC,UAAU,CAAC,UAAU,WAAW;QACzD,WAAW;QACX,WAAW;YACT,WAAW;YACX,UAAU;YACV,WAAW;YACX,UAAU;QACZ;QACA,UAAU;YACR,OAAO;YACP,OAAO;YACP,OAAO;YACP,OAAO;YACP,eAAe;YACf,gBAAgB;YAChB,iBAAiB;YACjB,YAAY;QACd;QACA,OAAO;YACL,SAAS;YACT,OAAO;YACP,QAAQ;QACV;QACA,UAAU;YACR,GAAG,CAAC,KAAK,MAAM,KAAK,GAAG,IAAI;YAC3B,GAAG;YACH,GAAG,CAAC,KAAK,MAAM,KAAK,GAAG,IAAI;QAC7B;QACA,UAAU,KAAK,MAAM,KAAK,KAAK,EAAE,GAAG;QACpC,kBAAkB;QAClB,WAAW;QACX,aAAa;QACb,YAAY;QACZ,kBAAkB;QAClB,YAAY;YAAC;SAAM;QACnB,SAAS,EAAE;QACX,aAAa,EAAE;QACf,aAAa;YACX,YAAY,YAAY,UAAU;YAClC,WAAW,YAAY,SAAS;YAChC,UAAU,KAAK,KAAK,MAAM,KAAK;YAC/B,UAAU,KAAK,KAAK,MAAM,KAAK;YAC/B,gBAAgB,KAAK,KAAK,MAAM,KAAK;QACvC;QACA,YAAY;YACV,iBAAiB,EAAE;YACnB,WAAW,IAAI;YACf,UAAU;YACV,aAAa,EAAE;QACjB;QACA,YAAY;YACV,SAAS;YACT,SAAS,EAAE;YACX,eAAe,IAAI;QACrB;QACA,eAAe;YACb,OAAO,EAAE;YACT,aAAa,EAAE;YACf,WAAW,IAAI;QACjB;QACA,cAAc;YACZ,UAAU;YACV,SAAS,CAAC,gBAAgB,EAAE,OAAO;YACnC,OAAO;YACP,OAAO;YACP,SAAS;YACT,qBAAqB;YACrB,mBAAmB;QACrB;QACA,MAAM;QACN,kBAAkB,KAAK,GAAG;IAC5B;AACF"}},
    {"offset": {"line": 6213, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/lib/hooks/useVoiceCommunication.ts"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef, useState, useCallback } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { ElevenLabsService } from \"@/lib/services/ElevenLabsService\"\n\nexport function useVoiceCommunication() {\n  const messageCount = useGameStore((state) => state.messages.length)\n  const lastMessageId = useGameStore((state) => state.messages[state.messages.length - 1]?.id)\n  const caregiversMap = useGameStore((state) => state.caregivers)\n\n  const [voiceService] = useState(() => new ElevenLabsService())\n  const lastProcessedMessage = useRef<string | null>(null)\n  const audioContextRef = useRef<AudioContext | null>(null)\n\n  // Stable function to get caregiver\n  const getCaregiver = useCallback((id: string) => caregiversMap.get(id), [caregiversMap])\n\n  // Initialize audio context\n  useEffect(() => {\n    if (typeof window !== \"undefined\" && \"AudioContext\" in window) {\n      audioContextRef.current = new AudioContext()\n    }\n\n    return () => {\n      audioContextRef.current?.close()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!audioContextRef.current || !lastMessageId || messageCount === 0) return\n\n    if (lastMessageId === lastProcessedMessage.current) return\n\n    // Get latest message from store\n    const messages = useGameStore.getState().messages\n    const latestMessage = messages[messages.length - 1]\n    if (!latestMessage) return\n\n    const caregiver = getCaregiver(latestMessage.senderId)\n    if (!caregiver) return\n\n    lastProcessedMessage.current = lastMessageId\n\n    // Synthesize speech\n    const voiceSettings = voiceService.getVoiceSettingsForEmotion(caregiver.voiceProfile.emotion)\n\n    voiceService\n      .synthesizeSpeech(latestMessage.content, {\n        voiceId: caregiver.voiceProfile.voiceId,\n        ...voiceSettings,\n      })\n      .then(async (audioData) => {\n        if (!audioContextRef.current || audioData.byteLength === 0) return\n\n        try {\n          const audioBuffer = await audioContextRef.current.decodeAudioData(audioData)\n          const source = audioContextRef.current.createBufferSource()\n          source.buffer = audioBuffer\n          source.connect(audioContextRef.current.destination)\n          source.start()\n        } catch (error) {\n          console.error(\"[v0] Failed to play audio:\", error)\n        }\n      })\n      .catch((error) => {\n        console.error(\"[v0] Failed to synthesize speech:\", error)\n      })\n  }, [lastMessageId, messageCount, voiceService, getCaregiver])\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,eAAe,IAAA,6IAAY;4DAAC,CAAC,QAAU,MAAM,QAAQ,CAAC,MAAM;;IAClE,MAAM,gBAAgB,IAAA,6IAAY;6DAAC,CAAC,QAAU,MAAM,QAAQ,CAAC,MAAM,QAAQ,CAAC,MAAM,GAAG,EAAE,EAAE;;IACzF,MAAM,gBAAgB,IAAA,6IAAY;6DAAC,CAAC,QAAU,MAAM,UAAU;;IAE9D,MAAM,CAAC,aAAa,GAAG,IAAA,yKAAQ;0CAAC,IAAM,IAAI,4JAAiB;;IAC3D,MAAM,uBAAuB,IAAA,uKAAM,EAAgB;IACnD,MAAM,kBAAkB,IAAA,uKAAM,EAAsB;IAEpD,mCAAmC;IACnC,MAAM,eAAe,IAAA,4KAAW;2DAAC,CAAC,KAAe,cAAc,GAAG,CAAC;0DAAK;QAAC;KAAc;IAEvF,2BAA2B;IAC3B,IAAA,0KAAS;2CAAC;YACR,IAAI,+CAAkB,eAAe,kBAAkB,QAAQ;gBAC7D,gBAAgB,OAAO,GAAG,IAAI;YAChC;YAEA;mDAAO;oBACL,gBAAgB,OAAO,EAAE;gBAC3B;;QACF;0CAAG,EAAE;IAEL,IAAA,0KAAS;2CAAC;YACR,IAAI,CAAC,gBAAgB,OAAO,IAAI,CAAC,iBAAiB,iBAAiB,GAAG;YAEtE,IAAI,kBAAkB,qBAAqB,OAAO,EAAE;YAEpD,gCAAgC;YAChC,MAAM,WAAW,6IAAY,CAAC,QAAQ,GAAG,QAAQ;YACjD,MAAM,gBAAgB,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;YACnD,IAAI,CAAC,eAAe;YAEpB,MAAM,YAAY,aAAa,cAAc,QAAQ;YACrD,IAAI,CAAC,WAAW;YAEhB,qBAAqB,OAAO,GAAG;YAE/B,oBAAoB;YACpB,MAAM,gBAAgB,aAAa,0BAA0B,CAAC,UAAU,YAAY,CAAC,OAAO;YAE5F,aACG,gBAAgB,CAAC,cAAc,OAAO,EAAE;gBACvC,SAAS,UAAU,YAAY,CAAC,OAAO;gBACvC,GAAG,aAAa;YAClB,GACC,IAAI;mDAAC,OAAO;oBACX,IAAI,CAAC,gBAAgB,OAAO,IAAI,UAAU,UAAU,KAAK,GAAG;oBAE5D,IAAI;wBACF,MAAM,cAAc,MAAM,gBAAgB,OAAO,CAAC,eAAe,CAAC;wBAClE,MAAM,SAAS,gBAAgB,OAAO,CAAC,kBAAkB;wBACzD,OAAO,MAAM,GAAG;wBAChB,OAAO,OAAO,CAAC,gBAAgB,OAAO,CAAC,WAAW;wBAClD,OAAO,KAAK;oBACd,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,8BAA8B;oBAC9C;gBACF;kDACC,KAAK;mDAAC,CAAC;oBACN,QAAQ,KAAK,CAAC,qCAAqC;gBACrD;;QACJ;0CAAG;QAAC;QAAe;QAAc;QAAc;KAAa;AAC9D;GA/DgB;;QACO,6IAAY;QACX,6IAAY;QACZ,6IAAY"}},
    {"offset": {"line": 6316, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { DaycareScene } from \"@/components/three/DaycareScene\"\nimport { HUD } from \"@/components/ui/HUD\"\nimport { VoiceControls } from \"@/components/ui/VoiceControls\"\nimport { VoiceVisualizer } from \"@/components/ui/VoiceVisualizer\"\nimport { TranscriptDisplay } from \"@/components/ui/TranscriptDisplay\"\nimport { PaywallDialog } from \"@/components/ui/PaywallDialog\"\nimport { TrialBanner } from \"@/components/ui/TrialBanner\"\nimport { DaycareCreationButton } from \"@/components/ui/DaycareCreationButton\"\nimport { SubscriptionStatus } from \"@/components/ui/SubscriptionStatus\"\nimport { Suspense, useEffect } from \"react\"\nimport { useGameStore } from \"@/lib/stores/gameStore\"\nimport { useAICaregivers } from \"@/lib/hooks/useAICaregivers\"\nimport { useVoiceCommunication } from \"@/lib/hooks/useVoiceCommunication\"\nimport { nanoid } from \"nanoid\"\nimport type { Player, Lobby } from \"@/lib/types/gameTypes\"\n\nexport default function Home() {\n  const setCurrentLobby = useGameStore((state) => state.setCurrentLobby)\n  const setCurrentPlayer = useGameStore((state) => state.setCurrentPlayer)\n  useAICaregivers()\n  useVoiceCommunication()\n\n  useEffect(() => {\n    // Initialize a test lobby with player\n    const playerId = nanoid()\n\n    const testPlayer: Player = {\n      id: playerId,\n      name: \"Little One\",\n      role: \"little\",\n      gender: \"male\",\n      adminRole: \"none\",\n      character: {\n        skinColor: \"#F5D0C5\",\n        ageGroup: \"4-7\",\n        hairColor: \"#FFD700\",\n        eyeColor: \"#87CEEB\",\n      },\n      clothing: {\n        shirt: true,\n        pants: true,\n        socks: true,\n        shoes: true,\n        underwearType: \"training_pants\",\n        underwearState: \"clean\",\n        diaperFillLevel: 0,\n        pacifierIn: false,\n      },\n      needs: {\n        bladder: 20,\n        bowel: 10,\n        hunger: 15,\n      },\n      position: { x: 0, y: 1.5, z: 0 }, // Start above ground level\n      rotation: 0,\n      disciplineStatus: \"green\",\n      alignment: \"boy_girl\",\n      isInTimeout: false,\n      isBeingLed: false,\n      currentAnimation: \"walk\",\n      privileges: [],\n      rewards: [],\n      punishments: [],\n    }\n\n    const testLobby: Lobby = {\n      id: nanoid(),\n      inviteCode: \"TEST123\",\n      settings: {\n        name: \"Test Daycare\",\n        maxPlayers: 20,\n        staffOnlyRoleChanges: false,\n        staffOnlyGenderChanges: false,\n        isPrivate: false,\n        monetizationEnabled: true,\n        trialDays: 7,\n      },\n      ownerId: playerId,\n      players: new Map([[playerId, testPlayer]]),\n      caregivers: new Map(),\n      objects: new Map(),\n      accidents: new Map(),\n      createdAt: Date.now(),\n      trialEndDate: Date.now() + 2 * 24 * 60 * 60 * 1000, // 2 days trial\n      isSuspended: false,\n    }\n\n    setCurrentLobby(testLobby)\n    setCurrentPlayer(playerId)\n  }, [setCurrentLobby, setCurrentPlayer])\n\n  return (\n    <main className=\"w-full h-screen overflow-hidden relative\">\n      <Suspense\n        fallback={\n          <div className=\"w-full h-screen flex items-center justify-center bg-background\">\n            <div className=\"flex flex-col items-center gap-4\">\n              <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n              <p className=\"text-lg font-medium text-foreground\">Initializing Daycare...</p>\n            </div>\n          </div>\n        }\n      >\n        <DaycareScene />\n        <HUD />\n        <VoiceControls />\n        <VoiceVisualizer />\n        <TranscriptDisplay />\n        <PaywallDialog />\n        <TrialBanner />\n\n        {/* Top bar with daycare management */}\n        <div className=\"fixed top-4 left-1/2 -translate-x-1/2 flex items-center gap-4 pointer-events-auto\">\n          <DaycareCreationButton />\n        </div>\n\n        {/* Subscription status at bottom left */}\n        <div className=\"fixed bottom-4 left-4 pointer-events-auto max-w-[350px]\">\n          <SubscriptionStatus />\n        </div>\n      </Suspense>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAfA;;;;;;;;;;;;;;;AAkBe,SAAS;;IACtB,MAAM,kBAAkB,IAAA,6IAAY;8CAAC,CAAC,QAAU,MAAM,eAAe;;IACrE,MAAM,mBAAmB,IAAA,6IAAY;+CAAC,CAAC,QAAU,MAAM,gBAAgB;;IACvE,IAAA,qJAAe;IACf,IAAA,iKAAqB;IAErB,IAAA,0KAAS;0BAAC;YACR,sCAAsC;YACtC,MAAM,WAAW,IAAA,uKAAM;YAEvB,MAAM,aAAqB;gBACzB,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,QAAQ;gBACR,WAAW;gBACX,WAAW;oBACT,WAAW;oBACX,UAAU;oBACV,WAAW;oBACX,UAAU;gBACZ;gBACA,UAAU;oBACR,OAAO;oBACP,OAAO;oBACP,OAAO;oBACP,OAAO;oBACP,eAAe;oBACf,gBAAgB;oBAChB,iBAAiB;oBACjB,YAAY;gBACd;gBACA,OAAO;oBACL,SAAS;oBACT,OAAO;oBACP,QAAQ;gBACV;gBACA,UAAU;oBAAE,GAAG;oBAAG,GAAG;oBAAK,GAAG;gBAAE;gBAC/B,UAAU;gBACV,kBAAkB;gBAClB,WAAW;gBACX,aAAa;gBACb,YAAY;gBACZ,kBAAkB;gBAClB,YAAY,EAAE;gBACd,SAAS,EAAE;gBACX,aAAa,EAAE;YACjB;YAEA,MAAM,YAAmB;gBACvB,IAAI,IAAA,uKAAM;gBACV,YAAY;gBACZ,UAAU;oBACR,MAAM;oBACN,YAAY;oBACZ,sBAAsB;oBACtB,wBAAwB;oBACxB,WAAW;oBACX,qBAAqB;oBACrB,WAAW;gBACb;gBACA,SAAS;gBACT,SAAS,IAAI,IAAI;oBAAC;wBAAC;wBAAU;qBAAW;iBAAC;gBACzC,YAAY,IAAI;gBAChB,SAAS,IAAI;gBACb,WAAW,IAAI;gBACf,WAAW,KAAK,GAAG;gBACnB,cAAc,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;gBAC9C,aAAa;YACf;YAEA,gBAAgB;YAChB,iBAAiB;QACnB;yBAAG;QAAC;QAAiB;KAAiB;IAEtC,qBACE,6LAAC;QAAK,WAAU;kBACd,cAAA,6LAAC,yKAAQ;YACP,wBACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAE,WAAU;sCAAsC;;;;;;;;;;;;;;;;;;8BAKzD,6LAAC,uJAAY;;;;;8BACb,6LAAC,kIAAG;;;;;8BACJ,6LAAC,sJAAa;;;;;8BACd,6LAAC,0JAAe;;;;;8BAChB,6LAAC,8JAAiB;;;;;8BAClB,6LAAC,sJAAa;;;;;8BACd,6LAAC,kJAAW;;;;;8BAGZ,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,sKAAqB;;;;;;;;;;8BAIxB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,gKAAkB;;;;;;;;;;;;;;;;;;;;;AAK7B;GA3GwB;;QACE,6IAAY;QACX,6IAAY;QACrC,qJAAe;QACf,iKAAqB;;;KAJC"}}]
}