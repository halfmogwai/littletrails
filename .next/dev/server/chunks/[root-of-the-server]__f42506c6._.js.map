{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/app/api/voice/synthesize/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { text, voiceId, stability = 0.7, similarityBoost = 0.8, style = 0.3 } = await request.json()\n\n    if (!text || !voiceId) {\n      return NextResponse.json({ error: \"Missing text or voiceId\" }, { status: 400 })\n    }\n\n    const apiKey = process.env.ELEVENLABS_API_KEY\n\n    if (!apiKey) {\n      console.error(\"ElevenLabs API key not configured\")\n      // Return empty audio buffer as fallback\n      return new NextResponse(new ArrayBuffer(0), {\n        headers: {\n          \"Content-Type\": \"audio/mpeg\",\n        },\n      })\n    }\n\n    const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"audio/mpeg\",\n        \"Content-Type\": \"application/json\",\n        \"xi-api-key\": apiKey,\n      },\n      body: JSON.stringify({\n        text,\n        model_id: \"eleven_multilingual_v2\",\n        voice_settings: {\n          stability,\n          similarity_boost: similarityBoost,\n          style,\n          use_speaker_boost: true,\n        },\n      }),\n    })\n\n    if (!response.ok) {\n      console.error(\"ElevenLabs TTS error:\", response.status)\n      return new NextResponse(new ArrayBuffer(0), {\n        status: response.status,\n        headers: {\n          \"Content-Type\": \"audio/mpeg\",\n        },\n      })\n    }\n\n    const audioData = await response.arrayBuffer()\n\n    return new NextResponse(audioData, {\n      headers: {\n        \"Content-Type\": \"audio/mpeg\",\n      },\n    })\n  } catch (error) {\n    console.error(\"Speech synthesis error:\", error)\n    return NextResponse.json({ error: \"Synthesis failed\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,YAAY,GAAG,EAAE,kBAAkB,GAAG,EAAE,QAAQ,GAAG,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjG,IAAI,CAAC,QAAQ,CAAC,SAAS;YACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB;QAE7C,IAAI,CAAC,QAAQ;YACX,QAAQ,KAAK,CAAC;YACd,wCAAwC;YACxC,OAAO,IAAI,gJAAY,CAAC,IAAI,YAAY,IAAI;gBAC1C,SAAS;oBACP,gBAAgB;gBAClB;YACF;QACF;QAEA,MAAM,WAAW,MAAM,MAAM,CAAC,4CAA4C,EAAE,SAAS,EAAE;YACrF,QAAQ;YACR,SAAS;gBACP,QAAQ;gBACR,gBAAgB;gBAChB,cAAc;YAChB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA,UAAU;gBACV,gBAAgB;oBACd;oBACA,kBAAkB;oBAClB;oBACA,mBAAmB;gBACrB;YACF;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,yBAAyB,SAAS,MAAM;YACtD,OAAO,IAAI,gJAAY,CAAC,IAAI,YAAY,IAAI;gBAC1C,QAAQ,SAAS,MAAM;gBACvB,SAAS;oBACP,gBAAgB;gBAClB;YACF;QACF;QAEA,MAAM,YAAY,MAAM,SAAS,WAAW;QAE5C,OAAO,IAAI,gJAAY,CAAC,WAAW;YACjC,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;AACF"}}]
}