{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/jdbohrman/Downloads/little-trails/app/api/voice/transcribe/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n    const audioFile = formData.get(\"audio\") as Blob\n\n    if (!audioFile) {\n      return NextResponse.json({ error: \"No audio file provided\" }, { status: 400 })\n    }\n\n    const apiKey = process.env.ELEVENLABS_API_KEY\n\n    if (!apiKey) {\n      console.error(\"ElevenLabs API key not configured\")\n      return NextResponse.json({ text: \"Speech transcription unavailable\", confidence: 0 }, { status: 200 })\n    }\n\n    const whisperFormData = new FormData()\n    whisperFormData.append(\"file\", audioFile, \"audio.wav\")\n    whisperFormData.append(\"model\", \"whisper-1\")\n    whisperFormData.append(\"language\", \"en\")\n\n    const response = await fetch(\"https://api.openai.com/v1/audio/transcriptions\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${apiKey}`,\n      },\n      body: whisperFormData,\n    })\n\n    if (!response.ok) {\n      console.error(\"OpenAI Whisper error:\", response.status)\n      return NextResponse.json({ text: \"Transcription failed\", confidence: 0 }, { status: response.status })\n    }\n\n    const result = await response.json()\n\n    return NextResponse.json({\n      text: result.text || \"\",\n      confidence: 0.9,\n      language: \"en\",\n      duration: 0,\n    })\n  } catch (error) {\n    console.error(\"Transcription error:\", error)\n    return NextResponse.json({ error: \"Transcription failed\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,YAAY,SAAS,GAAG,CAAC;QAE/B,IAAI,CAAC,WAAW;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB;QAE7C,IAAI,CAAC,QAAQ;YACX,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,MAAM;gBAAoC,YAAY;YAAE,GAAG;gBAAE,QAAQ;YAAI;QACtG;QAEA,MAAM,kBAAkB,IAAI;QAC5B,gBAAgB,MAAM,CAAC,QAAQ,WAAW;QAC1C,gBAAgB,MAAM,CAAC,SAAS;QAChC,gBAAgB,MAAM,CAAC,YAAY;QAEnC,MAAM,WAAW,MAAM,MAAM,kDAAkD;YAC7E,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,QAAQ;YACnC;YACA,MAAM;QACR;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,yBAAyB,SAAS,MAAM;YACtD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,MAAM;gBAAwB,YAAY;YAAE,GAAG;gBAAE,QAAQ,SAAS,MAAM;YAAC;QACtG;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,MAAM,OAAO,IAAI,IAAI;YACrB,YAAY;YACZ,UAAU;YACV,UAAU;QACZ;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}